(self.webpackChunklite=self.webpackChunklite||[]).push([[3414],{59116:(e,t,n)=>{"use strict";n.d(t,{Te:()=>r,_M:()=>o,ed:()=>i});var r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){return 2===e.type&&1===e.path.length}))},o=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},i=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},64946:(e,t,n)=>{"use strict";n.d(t,{a:()=>f,C:()=>h});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),s=n(12291),l=n(72826);function c(){var e=o()(["\n  fragment PostCacheTagger_post on Post {\n    id\n    collection {\n      id\n    }\n    creator {\n      id\n    }\n  }\n"]);return c=function(){return e},e}var u=function(e){var t=e.post,n=t.id,r=t.collection,o=t.creator,i=["group-edgeCachePosts","post-".concat(n)];o&&o.id&&i.push("user-".concat(o.id)),r&&r.id&&i.push("collection-".concat(r.id));var a=(0,s.I0)();return 0===(0,s.v9)((function(e){return e.cache.tags})).length&&a((0,l.zl)(i)),null},d=(0,i.Ps)(c()),p=n(85740),m=n(31235);function g(){var e=o()(["\n  fragment PostCacheController_post on Post {\n    id\n    isLocked\n    ...PostCacheTagger_post\n  }\n  ","\n"]);return g=function(){return e},e}var f=function(e){var t=e.post,n=e.isLoggedIn,r=(0,p.gc)("post_edge_cache_enabled"),o=r.loading,i=r.error,c=r.value,d=(0,p.gc)("is_internal_ip").value,g=(0,s.I0)(),f=(0,m.kP)(),h=(0,m.iX)();return(0,a.useEffect)((function(){return function(){f||g((0,l.LG)())}}),[t.id,f]),(0,s.v9)((function(e){var t=e.config.isTaggedVersion,n=e.session.isSpoofed;return t||n}))||o||i||d||t.isLocked||n||!f||h?null:c?(g((0,l.pA)()),a.createElement(u,{post:t})):(g((0,l.gQ)()),null)},h=(0,i.Ps)(g(),d)},78067:(e,t,n)=>{"use strict";var r;n.d(t,{r:()=>r}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(r||(r={}))},94132:(e,t,n)=>{"use strict";n.d(t,{T:()=>v});var r=n(59713),o=n.n(r),i=n(67294),a=n(12291),s=n(60046),l=n(82418),c=n(97145),u=n(203),d=n(64504),p=n(28309),m=n(67122),g=n(27952);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=e.authDomain,n=e.productName;return i.createElement(u.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(u.xu,{paddingBottom:"8px"},i.createElement(u.rU,{href:(0,g.GM)(t,n)},i.createElement(d.X6,{scale:"S"},"Share your thinking."))),i.createElement(d.F,{scale:"M"},"If you have a story to tell, knowledge to share, or a perspective to offer — welcome home. It’s easy and free to post your thinking on any topic."," ",i.createElement(u.rU,{href:(0,g.GM)(t,n),inline:!0,linkStyle:"OBVIOUS"},"Write on ",n)))},v=function(e){var t=e.slimFooter,n=(0,a.v9)((function(e){return{authDomain:e.config.authDomain,productName:e.config.productName}}),a.wU),r=n.authDomain,o=n.productName,f=(0,p.Fg)(),v=h(h({},f),{},{baseColor:h(h({},f.baseColor),{},{background:{light:m.Uy(.76),normal:m.Uy(.84),dark:m.Uy(.9)},border:{lighter:m.l9(.1),light:m.l9(.2),normal:m.l9(.34),dark:m.l9(.54),darker:m.l9(.84)},fill:{lighter:m.l9(.7),light:m.l9(.8),normal:m.l9(.98),dark:m.l9(.99),darker:m.l9(1)},text:{lighter:m.l9(.7),light:m.l9(.8),normal:m.l9(.98),dark:m.l9(.99),darker:m.l9(1)}})});return i.createElement(u.f6,{theme:v},i.createElement(u.xu,{backgroundColor:"BASE_DARK",padding:"".concat(t?"32px":"60px"," 0"),sm:{padding:"32px 0"}},i.createElement(u.Pm,null,t?null:i.createElement(u.xu,{borderBottom:"BASE_DARK",display:"flex",justifyContent:"space-between",marginBottom:"32px",paddingBottom:"48px",sm:{display:"none"}},i.createElement(u.xu,{display:"flex",justifyContent:"space-between",margin:"0 -12px"},i.createElement(u.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(u.xu,{paddingBottom:"8px"},i.createElement(u.rU,{href:(0,g.jQ)({authDomain:r,autoplay:!0})},i.createElement(d.X6,{scale:"S"},"Learn more."))),i.createElement(d.F,{scale:"M"},o," is an open platform where 170 million readers come to find insightful and dynamic thinking. Here, expert and undiscovered voices alike dive into the heart of any topic and bring new ideas to the surface."," ",i.createElement(u.rU,{href:(0,g.jQ)({authDomain:r,autoplay:!0}),inline:!0,linkStyle:"OBVIOUS"},"Learn more"))),i.createElement(u.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(u.xu,{paddingBottom:"8px"},i.createElement(u.rU,{href:(0,g.a4)(r)},i.createElement(d.X6,{scale:"S"},"Make ",o," yours."))),i.createElement(d.F,{scale:"M"},"Follow the writers, publications, and topics that matter to you, and you’ll see them on your homepage and in your inbox."," ",i.createElement(u.rU,{href:(0,g.a4)(r),inline:!0,linkStyle:"OBVIOUS"},"Explore"))),i.createElement(E,{authDomain:r,productName:o}))),i.createElement(u.xu,{display:"flex",flexDirection:"column"},i.createElement(u.xu,{alignItems:"center",display:"flex",justifyContent:"space-between"},i.createElement(u.rU,{href:"https://".concat(r,"/"),ariaLabel:"Go to homepage"},i.createElement(s.Rv,{fill:m.ix})),i.createElement(u.xu,{display:"flex",justifyContent:"space-between",paddingTop:"8px",width:"200px",sm:{display:"flex",width:"140px"}},i.createElement(d.F,{color:"DARKER",scale:"L"},i.createElement(u.rU,{href:(0,g.jQ)({authDomain:r}),inline:!0},"About")),i.createElement(d.F,{color:"DARKER",scale:"L"},i.createElement(u.rU,{href:(0,g.Xp)(),inline:!0},"Help")),i.createElement(d.F,{color:"DARKER",scale:"L"},i.createElement(u.rU,{href:(0,g.xB)(),inline:!0},"Legal")))),i.createElement(i.Fragment,null,i.createElement(u.xu,{display:"none",sm:{display:"flex",marginBottom:"16px",marginTop:"30px"}},i.createElement(d.F,{color:"LIGHTER",scale:"L"},"Get the Medium app")),i.createElement(u.xu,{display:"none",sm:{display:"flex",flexDirection:"row",marginBottom:"16px",width:"100%"}},i.createElement(u.xu,{marginRight:"16px"},i.createElement(c.E,{entryPoint:"postPageFooter"})),i.createElement(u.xu,null,i.createElement(l.H,{entryPoint:"postPageFooter"}))))))))}},31933:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n(67294),o=n(203),i=n(67122),a=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement(o.xu,{marginTop:"-240px",background:"linear-gradient(".concat((0,i.l9)(0),",\n        ").concat((0,i.l9)(.5),",\n        ").concat((0,i.l9)(1),")"),height:"250px",position:"relative",width:"100%"}),r.createElement(o.xu,{backgroundColor:"BACKGROUND"},r.createElement(o.xu,{margin:"auto",maxWidth:"760px",sm:{margin:"0 18px 0"}},t)))}},4995:(e,t,n)=>{"use strict";n.d(t,{P:()=>L,F:()=>C});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),s=n(12291),l=n(31933),c=n(51562),u=n(85740),d=n(57168),p=n(9785),m=n(324),g=n(37258),f=n(19608),h=n(27168),E=n(48881),v=n(62876),b=n(203),y=n(64504),x=n(98024),S=n(62630),P=n(27572),w=n(96907),R=n(33572),I=n(85277),O=n(27952);function T(){var e=o()(["\n  fragment PayWall_post on Post {\n    id\n    creator {\n      name\n    }\n  }\n"]);return T=function(){return e},e}var k=function(e){var t=e.optimizelyFeatureString,n=e.post,r=e.viewer,o=e.showTrialPaywall,i=e.authDomain,s=!!(0,u.P5)("enable_lite_pay_page"),l=!!(0,u.P5)("enable_new_checkout_flow");return a.createElement(P.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:n.id}},a.createElement(w.M,null,a.createElement(b.xu,{display:"inline-block",textAlign:"center"},a.createElement(c.W,{featureString:t,target:o?"trial-upsell-button":"upsell-button-".concat(r&&r.hasPastMemberships?"resume-membership":"upgrade")},a.createElement(v.a,{isButton:!0,buttonStyle:o?"BRAND":"STRONG",width:o||r&&r.hasPastMemberships?"182px":"104px",redirectUrl:s&&(o||l)?(0,O.c5)(i):(0,O.KP)(i)},o?"Start your free trial":r&&r.hasPastMemberships?"Resume membership":"Upgrade")))))},D=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=(0,s.I0)();return a.createElement(P.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},a.createElement(b.xu,{display:"flex",sm:{flexDirection:"column"}},a.createElement(b.xu,{display:"flex",flexDirection:"row",justifyContent:"center"},n.facebook||n.google||n.twitter?a.createElement(f.r,{userSocialLogins:n}):a.createElement(g.o,{onSuccess:function(){return r((0,I.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:n.userId},(function(e){var t=e.handleSubmit;return a.createElement(b.zx,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")})))),t&&a.createElement(b.xu,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},a.createElement(x.F,{scale:"M"},a.createElement(h.G,{declineSuggestedAccount:t,isSocial:!!n&&!!(n.facebook||n.google||n.twitter)}))))},A=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=e.suggestedAccountEventData,o=e.showSuggestedAccount,i=e.postId;return a.createElement(P.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:i}},a.createElement(w.M,{eventData:r},a.createElement(b.xu,{display:"inline-block",textAlign:"center"},a.createElement(D,{declineSuggestedAccount:t,showSuggestedAccount:o,userSocialLogins:n}),a.createElement(b.xu,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},a.createElement(x.F,{scale:"L"},a.createElement(v.a,{eventData:r,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},C=function(e){var t=e.post,n=(0,s.v9)((function(e){return e.config.authDomain})),r=(0,s.v9)((function(e){return e.config.productName})),o=(0,p.YC)().value,i=(0,d.r)().viewerId,g=(0,S.Av)(),f=null==o?void 0:o.isMembershipTrialEligible,h=!(!(0,u.P5)("enable_trial_upsell")||!f),v=!!(0,u.P5)("optimizely_holdback");a.useEffect((function(){f&&g.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var P="paywall";return a.createElement(m.N8,null,a.createElement(l.F,null,a.createElement(E.o,{postRenderCallback:function(){}},(function(e){var s,l=e.loading,u=e.showSuggestedAccount,d=e.declineSuggestedAccount,p=e.userSocialLogins;return l?a.createElement(a.Fragment,null):(u&&(P="suggested-account-paywall"),u&&(s={alternateUserSuggestionShown:u,alternateUserSuggestionAccountType:(0,R.S)(p),alternateUserSuggestionTargetUserId:!!p&&p.userId,alternateUserSuggestionSourceUserId:i}),a.createElement(a.Fragment,null,a.createElement(c.W,{featureString:P,target:h?"trial-background-color":"background-color"},a.createElement(b.xu,{display:"flex",minHeight:"350px",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(b.xu,{display:"flex",flexDirection:"column",padding:"48px 50px",sm:{padding:"28px 16px 32px",textAlign:"center"}},a.createElement(c.W,{featureString:P,target:h?"webCCTrialHeading":"fewerClicksHeading"},a.createElement(y.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,t,n,r){var o=r.showSuggestedAccount,i=r.showTrialPaywall,s=r.inHoldback,l=t?(0,R.J)(t):null;return l=l&&l.length<=13?l:null,o?"Switch to your member account for unlimited reading.":i?a.createElement(b.xu,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},l?"".concat(l,", keep reading."):"Keep reading."):a.createElement(b.xu,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},s?"How to read this story — and everything else on ".concat(e,"."):l?n?"".concat(l,", read more from ").concat(n," — and everyone else on ").concat(e,"."):"".concat(l,", here's how to read this story — and everything else on ").concat(e,"."):n?"How to read this story from ".concat(n," — and everything else on ").concat(e,"."):"How to read this story — and everything else on ".concat(e,"."))}(r,o&&o.name,t.creator&&t.creator.name,{showSuggestedAccount:u,showTrialPaywall:h,inHoldback:v}))),a.createElement(x.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!u&&!h&&a.createElement(a.Fragment,null,a.createElement(c.W,{featureString:P,target:"second-header-fewer-clicks"},a.createElement(b.xu,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},"You’ve read all your free member-only stories. Become a member to get unlimited access and support the voices you want to hear more from.")),a.createElement(b.xu,{display:"flex",justifyContent:"flex-start",sm:{justifyContent:"center"}},a.createElement(k,{optimizelyFeatureString:P,post:t,viewer:o,showTrialPaywall:h,authDomain:n}))),a.createElement(c.W,{featureString:P,target:h?"subtitle-copy-web-cc-trial":"subtitle-copy-fewer-clicks"},a.createElement(b.xu,{marginTop:u?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,t,n,r){var o=n.showTrialPaywall;if(n.showSuggestedAccount&&t){var i=t.isMember,s=t.redactedEmailAddress;return a.createElement(a.Fragment,null,"Looks like you're coming from the ",i&&"member ","account"," ",a.createElement("b",null,s)," but you’re signed in as ",a.createElement("b",null,null==r?void 0:r.email),". Switch to your",i?" member account for unlimited access":" account",".")}return a.createElement(b.xu,{marginTop:"28px",marginBottom:"28px",textAlign:o?"center":"left"},o?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):a.createElement(a.Fragment,null,a.createElement("b",null,"Read any story. "),"Access everything on ",e," across all your devices with no limits or ads.",a.createElement("br",null),a.createElement("br",null),a.createElement("b",null,"Reward great writing. "),"A portion of your membership fee will go toward the writers you read most."))}(r,p,{showSuggestedAccount:u,showTrialPaywall:h},o)))),!!u&&p&&a.createElement(A,{declineSuggestedAccount:d,userSocialLogins:p,suggestedAccountEventData:s,showSuggestedAccount:u,postId:t.id}),h&&!u&&a.createElement(k,{optimizelyFeatureString:P,post:t,viewer:o,showTrialPaywall:h,authDomain:n}))))))}))))},L=(0,i.Ps)(T())},86987:(e,t,n)=>{"use strict";n.d(t,{Mt:()=>O,E7:()=>T,VP:()=>k});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),s=n(6401),l=n(31933),c=n(51562),u=n(85740),d=n(324),p=n(62181),m=n(5731),g=n(59317),f=n(81405),h=n(90174),E=n(4134),v=n(203),b=n(64504),y=n(62630),x=n(27572),S=n(37581);function P(){var e=o()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return P=function(){return e},e}function w(){var e=o()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return w=function(){return e},e}var R="post_regwall",I=function(e){var t=e.enablePasswords,n=e.meterCount,r=e.optimizelyFeatureString,o=e.postId,i={operation:"register"},s=(0,g.j)().openModal,l=function(e){var n=e.children;return t?a.createElement(c.W,{featureString:r,target:"google-button"},n):n};return a.createElement(v.xu,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(c.W,{featureString:r,target:"google-button"},a.createElement(v.xu,{margin:"".concat(t?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},a.createElement(S.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},a.createElement(E.x,i)))),a.createElement(l,null,a.createElement(v.xu,{marginBottom:t?"32px":"52px",sm:{marginBottom:"40px"}},a.createElement(S.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},t?a.createElement(f.R,{goToEmailAuthStep:function(){s({step:"ENTER_EMAIL",susiEntry:R,operation:"register"})},operation:"register"}):a.createElement(h.q,i)))))},O=function(e){var t=e.meteringInfo,n=e.post,r=(0,y.Av)(),o=!!(0,u.P5)("enable_passwords"),i="LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,g="".concat(i?"syndicated-":"","regwall");return a.useEffect((function(){r.event("meter.viewed",{meterCount:null==t?void 0:t.postIds.length,postId:n.id,uiType:i?m.j.SyndicatedRegwall:m.j.RegWall})}),[]),a.createElement(d.N8,null,a.createElement(x.cW,{source:{postId:n.id,susiEntry:R}},a.createElement(l.F,null,a.createElement(c.W,{featureString:g,target:"background-color"},a.createElement(v.xu,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},a.createElement(v.xu,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},a.createElement(c.W,{featureString:g,target:"heading"},a.createElement(b.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},a.createElement(v.xu,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),a.createElement(v.xu,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account."))),a.createElement(b.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},a.createElement(v.xu,{display:"none",margin:"auto",paddingTop:"10px",width:"500px"},"You’ll also discover more fresh thinking personalized to your interests and can follow your favorite authors, publications, and topics."),a.createElement(v.xu,{display:"none",sm:{display:"block"}},a.createElement(v.xu,{margin:"".concat(o?"40px":"42px"," 0")},a.createElement(s.a,{isButton:!0,postId:n.id,appEntry:"regwall"})),a.createElement(c.W,{featureString:g,target:"skip-app-copy"},a.createElement(v.xu,{marginBottom:"-20px"},"Or, continue in mobile web"))),a.createElement(I,{meterCount:null==t?void 0:t.postIds.length,optimizelyFeatureString:g,postId:n.id,enablePasswords:o}),a.createElement(c.W,{featureString:g,target:"sign-in-copy",tag:"span"},"Already have an account?"," "),a.createElement(c.W,{featureString:g,target:"sign-in-link",tag:"span"},a.createElement(p.R9,{linkStyle:"OBVIOUS",operation:"login",post:n,susiEntry:R},"Sign in")))))))))},T=(0,i.Ps)(w(),p.qU),k=(0,i.Ps)(P())},12390:(e,t,n)=>{"use strict";n.d(t,{h:()=>p,P:()=>m});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),s=n(12291),l=n(42963),c=n(24087),u=n(27952);function d(){var e=o()(["\n  fragment MaybeRedirectToEditor_post on Post {\n    id\n    isPublished\n    collection {\n      id\n      viewerCanEditOwnPosts\n      viewerCanEditPosts\n      viewerIsEditor\n    }\n    creator {\n      id\n    }\n  }\n"]);return d=function(){return e},e}var p=(0,i.Ps)(d()),m=(0,s.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var t=e.authDomain,n=e.post,r=e.children;return a.createElement(c.Z,null,(function(e){return function(e,t){var n=e.collection,r=e.creator&&t&&e.creator.id===t.id,o=r&&n&&n.viewerCanEditOwnPosts||n&&(n.viewerIsEditor||n.viewerCanEditPosts);return(!e||!e.isPublished)&&(n?o:r)}(n,e)?a.createElement(l.Z,{to:(0,u.d0)(t,n.id)}):r}))}))},47921:(e,t,n)=>{"use strict";n.d(t,{i:()=>B,Z:()=>j});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),s=n(71439),l=n(67294),c=n(70405),u=n(12291),d=n(319),p=n.n(d),m=n(82492),g=n.n(m),f=n(68254),h=n.n(f),E=n(90038),v=n(96879),b=n(22744),y=n(27952);function x(){var e=o()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      ...userUrl_user\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    tags {\n      displayTitle\n    }\n    sequence {\n      slug\n    }\n    lockedSource\n    layerCake\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;if(!t||!n||!r)return null;var o=Math.min(r,60),i=o/r,a=Math.floor(n*i);return R({width:a,height:o,url:(0,E.W6)({miroId:t,width:a,freezeGifs:!0,strategy:E._S.Resample})})}function R(e){return P({"@type":"ImageObject"},e)}function I(e,t){return"".concat(e,":").concat(t)}const O=(0,u.$j)((function(e){var t=e.config,n=t.productName,r=t.defaultImages,o=t.collectionStructuredData,i=e.navigation;return{currentLocation:i.currentLocation,host:i.host,productName:n,defaultImages:r,collectionStructuredData:o}}))((function(e){var t=e.currentLocation,n=e.host,r=e.post,o=e.postDescription,i=e.productName,a=e.defaultImages,s=e.collectionStructuredData,u=r.collection,d=r.creator,m=r.id,f=r.mediumUrl,x=r.isLocked,S=r.previewImage,O=r.firstPublishedAt,T=r.updatedAt,k=r.tags,D=r.sequence,A=r.lockedSource,C=r.layerCake,L=r.structuredData,j=(0,b._t)(r,i),B={id:a.postLogo.imageId,originalWidth:a.postLogo.width,originalHeight:a.postLogo.height},_={id:a.orgLogo.imageId,originalWidth:a.orgLogo.width,originalHeight:a.orgLogo.height},N=u?{"@type":"Organization",name:u.name,url:u.domain||(0,v.l1)(n,(0,y.WG)(u,t)),logo:function(e){if(!e||!e.logo||!e.logo.id)return w(_);var t=w(e.logo);return t&&60===t.height&&t.width<=600?t:w(_)}(u)}:{"@type":"Organization",name:i,url:(0,v.l1)(n,"/"),logo:w(_)};u&&s&&s[u.id]&&g()(N,s[u.id].data);var U=[I("Lite","true")];k&&k.forEach((function(e){e.displayTitle&&U.push(I("Tag",e.displayTitle))})),u&&u.slug&&U.push(I("Publication",u.slug)),U.push(I("Elevated",(!!D).toString())),D&&D.slug&&U.push(I("Sequence",D.slug)),A&&U.push(I("LockedPostSource",A)),null!=C&&U.push(I("LayerCake",C.toString()));var M=o||"",F=x?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},H={"@context":"http://schema.org"},W=P({"@type":"NewsArticle",image:S&&S.id?function(e){var t=e.id,n=e.originalWidth,r=e.originalHeight,o=e.focusPercentX,i=e.focusPercentY;if(!t)return null;var a=1200,s=(0,E.vz)({miroId:t,aspectRatio:16/9,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),l=(0,E.vz)({miroId:t,aspectRatio:4/3,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),c=(0,E.vz)({miroId:t,aspectRatio:1,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),u=new Set([s,l,c]);return Array.from(u)}(S):R({url:(0,E.W6)({miroId:B.id,width:B.originalWidth}),height:B.originalHeight,width:B.originalWidth}),url:f,dateCreated:O&&new Date(O).toISOString(),datePublished:O&&new Date(O).toISOString(),dateModified:T&&new Date(T).toISOString(),headline:j,name:j,description:M,identifier:m,keywords:U.length?U:null,author:d&&d.name&&d.username?{"@type":"Person",name:d.name||d.username,url:(0,y.AW)(d,n)}:null,creator:d&&[d.name],publisher:N,mainEntityOfPage:f},F),V=P(P({},H),W);if(L&&L.length>0)try{var Q=JSON.parse(L);if(Q&&null!=Q&&Q["@graph"]&&(null==Q?void 0:Q["@graph"].length)>0){var z=((null==Q?void 0:Q["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));z&&z.length>0&&(V=P(P({},H),{},{"@graph":[W].concat(p()(z))}))}}catch(e){}return l.createElement(c.q,null,l.createElement("script",{type:"application/ld+json"},h()(V,{isJSON:!0})))}));var T=(0,s.Ps)(x(),b.bq,y.$m),k=n(27390),D=n(71794);function A(){var e=o()(["\n  fragment PostMetadata_post on Post {\n    id\n    socialTitle\n    socialDek\n    canonicalUrl\n    mediumUrl\n    metaDescription\n    latestPublishedAt\n    visibility\n    isLimitedState\n    readingTime\n    creator {\n      name\n      twitterScreenName\n      ...userUrl_user\n    }\n    collection {\n      ampEnabled\n      twitterUsername\n      facebookPageId\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalHeight\n      originalWidth\n    }\n    isShortform\n    ...PostJsonLd_post\n    ...postMetaDescription_post\n    ...shortformPostMetaDescription_post\n    ...shouldIndex_post\n    ...shortformPostTitle_post\n    ...getTitleDetails_post\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return A=function(){return e},e}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const j=(0,u.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var t,n,r=e.isAmp,o=e.host,i=e.authDomain,a=e.productName,s=e.post,u=s.canonicalUrl,d=s.collection,p=s.creator,m=s.id,g=s.latestPublishedAt,f=s.mediumUrl,h=s.previewContent,v=s.socialTitle,x=s.socialDek,S=s.visibility,P=s.isShortform,w=d&&d.ampEnabled,R=p&&p.name,I=(0,b.yB)(s),T=s.title||"",A=I.latestTitle||T;if(P){var C=L(L({},s),{},{title:A});t=(0,b.oS)(C,a,I.hasTitleGraf).trim(),n=(0,D.OO)(s,I.hasTitleGraf)}else t=(0,b._t)(s,a,I,!0).trim(),n=(0,D.j7)(s);var j,B,_=x||h&&h.subtitle||n;if(s&&s.previewImage&&s.previewImage.id&&!s.isLimitedState){var N=s.previewImage;j=(0,E.vz)({miroId:N.id,aspectRatio:1.9,croppedWidth:N.originalWidth?Math.min(N.originalWidth,1200):1200,originalWidth:N.originalWidth,originalHeight:N.originalHeight,focusPercentX:N.focusPercentX,focusPercentY:N.focusPercentY})}else if(s.isLimitedState){var U={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};j=(0,E.vz)({miroId:U.id,aspectRatio:1.9,croppedWidth:U.originalWidth?Math.min(U.originalWidth,1200):1200,originalWidth:U.originalWidth,originalHeight:U.originalHeight,focusPercentX:U.focusPercentX,focusPercentY:U.focusPercentY})}p&&p.username&&(B=(0,y.AW)(p,i));var M=(0,y.CK)(m),F=!(0,b.ao)(s),H=g&&new Date(g).toISOString(),W=(0,k.Vd)(s.readingTime||0),V=p&&p.twitterScreenName,Q=d&&d.twitterUsername||"Medium",z=d&&d.facebookPageId,G=v||T||A;s.isLimitedState&&(G="");var Y=s.isLimitedState?"":_,Z=l.useMemo((function(){return l.createElement(c.q,{htmlAttributes:r?{amp:void 0}:{}},l.createElement("meta",{property:"og:type",content:"article"}),H&&l.createElement("meta",{property:"article:published_time",content:H}),w&&!r?l.createElement("link",{rel:"amphtml",href:(0,y.Vc)(o,m)}):null,l.createElement("title",null,t),l.createElement("meta",{name:"title",content:t}),l.createElement("meta",{property:"og:title",content:G}),l.createElement("meta",{property:"twitter:title",content:G}),z&&l.createElement("meta",{property:"fb:pages",content:z}),l.createElement("meta",{name:"twitter:site",content:"@".concat(Q)}),l.createElement("meta",{name:"twitter:app:url:iphone",content:M}),l.createElement("meta",{property:"al:android:url",content:M}),l.createElement("meta",{property:"al:ios:url",content:M}),l.createElement("meta",{property:"al:android:app_name",content:"Medium"}),n&&l.createElement("meta",{name:"description",content:n}),_&&l.createElement("meta",{property:"og:description",content:Y}),_&&l.createElement("meta",{property:"twitter:description",content:Y}),l.createElement("meta",{property:"og:url",content:f}),l.createElement("meta",{property:"al:web:url",content:f}),j&&l.createElement("meta",{property:"og:image",content:j}),j&&l.createElement("meta",{name:"twitter:image:src",content:j}),l.createElement("meta",{name:"twitter:card",content:j?"summary_large_image":"summary"}),B&&l.createElement("meta",{property:"article:author",content:B}),B&&l.createElement("link",{rel:"author",href:B}),V&&l.createElement("meta",{name:"twitter:creator",content:"@".concat(V)}),R&&l.createElement("meta",{name:"author",content:R}),l.createElement("link",{rel:"canonical",href:u||f}),l.createElement("link",{rel:"alternate",href:(0,y.zi)((0,y.o2)("medium.com",s.id))}),l.createElement("meta",{name:"robots",content:"".concat(F?"noindex":"index",",follow,max-image-preview:large")}),l.createElement("meta",{name:"referrer",content:"UNLISTED"!==S?"unsafe-url":"origin"}),r?null:l.createElement("meta",{name:"twitter:label1",value:"Reading time"}),r?null:l.createElement("meta",{name:"twitter:data1",value:"".concat(W," min read")}),l.createElement("meta",{name:"parsely-post-id",content:m}))}),[r,t,u,f,j,w,m,v,n,B,R,V,M,F,H]);return l.createElement(l.Fragment,null,Z,l.createElement(O,{post:s,postDescription:n}))}));var B=(0,s.Ps)(A(),T,D.iI,D.m3,b.p3,b.Pz,b.dm,b.bq,y.$m)},53099:(e,t,n)=>{"use strict";n.d(t,{yx:()=>D,KR:()=>A});var r=n(63038),o=n.n(r),i=n(28655),a=n.n(i),s=n(71439),l=n(80439),c=n(67294),u=n(12291),d=n(24087),p=n(51607),m=n(203),g=n(64504),f=n(72955),h=n(14391),E=n(67122),v=n(76579),b=n(96879),y=n(27952);function x(){var e=a()(["\n  fragment PostPublishedDialog_prerequisite_post on Post {\n    id\n    creator {\n      id\n    }\n    collection {\n      id\n      viewerIsEditor\n    }\n    creatorPartnerProgramEnrollmentStatus\n  }\n"]);return x=function(){return e},e}function S(){var e=a()(["\n  query PostPublishedDialogQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...PostPublishedDialog_post\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function P(){var e=a()(["\n  fragment PostPublishedDialog_post on Post {\n    id\n    inResponseToPostResult {\n      __typename\n    }\n    visibility\n    curationEligibleAt\n    mediumUrl\n    shareKey\n    ...ShareButton_post\n    creatorPartnerProgramEnrollmentStatus\n    isNewsletter\n    isPublishToEmail\n    creator {\n      id\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var w=function(){return c.createElement(m.xu,null,c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:(0,y.Sc)()},"Learn more")," ","about what happens to your post when you publish.")};var R=(0,s.Ps)(P(),p.M),I=(0,s.Ps)(S(),R),O=function(e){var t=e.url,n=e.label;return c.createElement(v.b,{url:t},(function(e){return c.createElement(m.xu,{marginBottom:"8px"},c.createElement(m.zx,{buttonStyle:"SOCIAL",size:"REGULAR",width:"212px",onClick:function(e){return e}},c.createElement(m.xu,{display:"flex",alignItems:"center",justifyContent:"center"},e?"Copied!":n)))}))},T=function(e){var t=e.post,n=e.isUnlisted,r=e.postPath;return c.createElement(m.xu,{display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(g.F,{color:"DARKER",scale:"L"},function(e){return e?"Share your story outside Medium.":"Share your story with the world."}(n)),c.createElement(m.xu,{marginTop:"20px"},!n&&c.createElement(c.Fragment,null,c.createElement(m.xu,{marginBottom:"8px"},c.createElement(p.T,{socialPlatform:"FACEBOOK",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(m.xu,{marginBottom:"8px"},c.createElement(p.T,{socialPlatform:"TWITTER",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(m.xu,{marginBottom:"8px"},c.createElement(p.T,{socialPlatform:"LINKEDIN",buttonStyle:"BUTTON_BRANDED",post:t}))),c.createElement(O,{url:r,label:"Copy story link"})))},k=function(e){var t=e.viewerId,n=e.isVisible,r=e.hide,o=e.post,i=o.id,a=o.visibility,s=o.curationEligibleAt,l=o.mediumUrl,d=o.shareKey,p=o.creatorPartnerProgramEnrollmentStatus,f=o.isNewsletter,v=o.isPublishToEmail,x=o.creator,S="UNLISTED"===a,P=!!s,R=p===h.iR.ENROLLED,I=(0,u.v9)((function(e){return e.config.productName})),k="Your story is published!";return v&&t===(null==x?void 0:x.id)?k="Your story has been published and sent!":f&&(k="Your newsletter is on its way!"),c.createElement(m.Vq,{isVisible:n,hide:r,withAnimation:!0,withCloseButton:!1},c.createElement(m.xu,{background:E.ix,borderRadius:"4px",boxShadow:"0 2px 10px ".concat((0,E.Uy)(.15)),position:"relative",width:"900px",textAlign:"center",md:{width:"600px"},sm:{width:"calc(100vw - 128px)"}},c.createElement(m.xu,{padding:"56px",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"485px"},c.createElement(m.xu,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},c.createElement(g.F1,{scale:"L",tag:"h3"},k),c.createElement(m.xu,{maxWidth:"520px",marginTop:"20px"},c.createElement(g.F,{color:"DARKER",scale:"L"},function(e,t,n,r,o){return r?function(e,t){return e?"Your email will be delivered to your newsletter subscribers and editors, but will not appear publicly on ".concat(t,"."):c.createElement(c.Fragment,null,"Your subscribers and editors should have it soon. It’ll also show up on ",t," readers’ homepages and Digest emails depending on their interests."," ",c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us/articles/115004682167-How-to-use-Newsletters"},"Learn more"))}(e,o):e?"Your unlisted story will not appear publicly on ".concat(o,", but you can still share it."):n?t?c.createElement(c.Fragment,null,"As a member of the Partner Program, you’ve chosen to make this story eligible to earn money. It will be part of ",o,"’s metered paywall.",c.createElement(w,null)):c.createElement(c.Fragment,null,"You did not choose to make this story eligible to earn money. It will not be part of"," ",o,"’s metered paywall.",c.createElement(w,null)):c.createElement(c.Fragment,null,"This story isn’t currently eligible to earn money. To make this story eligible, join the"," ",o," Partner Program."," ",c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:"https://medium.com/earn"},"Learn more."))}(S,P,R,f,I))),c.createElement(m.xu,{paddingTop:"20px"},P&&!S&&l&&d&&c.createElement(O,{url:(0,b.Rk)((0,y.jV)(o),{sk:d}),label:"Copy Friend Link"})),c.createElement(m.xu,{borderBottom:"BASE_LIGHTER",width:"100%",margin:"20px 0"})),i&&l&&c.createElement(T,{post:o,isUnlisted:S,postPath:(0,y.jV)(o)})),c.createElement(m.PZ,{onClick:r,size:"LARGE"})))},D=function(e){var t=e.post,n=c.useState(!1),r=o()(n,2),i=r[0],a=r[1];return i?c.createElement(d.Z,null,(function(n){return n&&n.id&&(n.id===(t.creator&&t.creator.id)||t.collection&&t.collection.viewerIsEditor)?c.createElement(l.AE,{ssr:!1,query:I,variables:{postId:t.id}},(function(t){var r=t.loading,o=t.data,i=(o=void 0===o?{}:o).post;if(r||!i||i.inResponseToPostResult)return null;var a={isVisible:e.isVisible,hide:e.hide,post:i,viewerId:n.id};return c.createElement(k,a)})):null})):(f.V6.on("load",(function(){return a(!0)})),null)},A=(0,s.Ps)(x())},15789:(e,t,n)=>{"use strict";n.d(t,{U:()=>A,Z:()=>L});var r=n(67154),o=n.n(r),i=n(59713),a=n.n(i),s=n(28655),l=n.n(s),c=n(71439),u=n(80439),d=n(67294),p=n(25415),m=n(93227),g=n(69677),f=n(72846),h=n(91442),E=n(11642);function v(){var e=l()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return v=function(){return e},e}function b(){var e=l()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return b=function(){return e},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){if(!e||"number"!=typeof t||"number"!=typeof n)return null;var r=t,o=n;return e.substr(r,o-r)}var P=(0,c.Ps)(b()),w=(0,c.Ps)(v()),R=n(24087),I=n(31235);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(){var e=l()(["\n  query InteractivePostBodyQuery($postId: ID!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}function D(){var e=l()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that the postMeteringOptions is defined in handlers that use InteractivePostBody\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return D=function(){return e},e}var A=(0,c.Ps)(D(),m.iF,h.iB,w,f.Pk,f.v),C=(0,c.Ps)(k(),m.UW,h.g8,f.XV,f.w6,P);const L=d.forwardRef((function(e,t){var n=e.activeGrafId,r=e.activeNoteId,i=e.isAuroraPostPageEnabled,a=e.post,s=e.postBodyInserts,l=(0,I.xg)(),c=a.content,v=a.latestPublishedVersion;if(!c)throw new Error("Expected post to have content.");var b={bodyModel:c.bodyModel,creator:a.creator,isAuroraPostPageEnabled:i,postBodyInserts:s,ref:t,richTextStyle:"FULL_PAGE"},y=a&&a.creator&&a.creator.allowNotes||!1;return c.isLockedPreviewOnly||l?d.createElement(f.ZP,b):d.createElement(u.AE,{notifyOnNetworkStatusChange:!0,ssr:!1,query:C,variables:{postId:a.id,showNotes:y}},(function(e){var t=e.data,i=(t=void 0===t?{}:t).post,s=c.bodyModel&&c.bodyModel.paragraphs,l=function(e,t){return e&&t?e.map((function(e){var n=e.endOffset,r=e.startOffset,o=e.paragraphs&&e.paragraphs[0],i=function(e,t){return e?t.find((function(t){var n=t.name;return e===n})):null}(o.name,t);if(!o||!i)return null;var a=S(o.text,r,n),s=S(i.text,r,n);if(!a||!s)return null;if(a===s)return e;var l=i.text?i.text.indexOf(a):null;if("number"!=typeof l||l<0)return null;var c=l+a.length;return x(x({},e),{},{endOffset:c,startOffset:l})})).filter(E.b):e}(i&&i.highlights||[],s),u=i&&i.privateNotes||null;return d.createElement(g.yb,null,d.createElement(p.KN,{initialActivePrivateNoteId:r,initialActiveGrafName:n},d.createElement(m.Ms,{interactivePost:T(T({},a),{},{latestPublishedVersion:v}),highlights:l},d.createElement(R.Z,{nonBlocking:!0},(function(e){return d.createElement(h.U7,{highlights:l,paragraphs:s,viewer:e},d.createElement(f.ZP,o()({},b,{highlights:l,privateNotes:u})))})))))}))}))},47076:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var r=n(87757),o=n.n(r),i=n(48926),a=n.n(i),s=n(63038),l=n.n(s),c=n(67294),u=n(12291),d=n(59116),p=n(78067),m=n(14267),g=n(54260),f=n(30049),h=n(319),E=n.n(h),v=n(59713),b=n.n(v),y=n(28655),x=n.n(y),S=n(71439),P=n(80439),w=n(43522),R=n(58992);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=x()(["\n  mutation publishPostThreadedResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n    $responseDistribution: ResponseDistributionType\n  ) {\n    publishPostThreadedResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n      responseDistribution: $responseDistribution\n    ) {\n      id\n      ... on Post {\n        ...StoryResponse_threadedStoryResponse_post\n        ...SimpleResponse_threadedSimpleResponse_post\n        ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}var k=(0,S.Ps)(T(),w.Df,R.t,w.K5),D=function(e){var t=e.children,n=e.parentPostId;return c.createElement(P.mm,{mutation:k,update:function(e,t){var r=function(e,t){if(!t||!e.data)return null;var n=e.data.publishPostThreadedResponse;return O(O({},t),{},{postResponses:{count:t.postResponses.count+1},threadedPostResponses:O(O({},t.threadedPostResponses),{},{posts:[n].concat(E()(t.threadedPostResponses.posts))})})}(t,e.readFragment({id:"Post:".concat(n),fragment:w.K5,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}));null!==r&&e.writeFragment({id:"Post:".concat(n),fragment:w.K5,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:O({},r)})}},(function(e,n){return t({publishResponse:e,loading:n.loading,error:n.error})}))},A=n(53945),C=n(19537),L=n(18608),j=n(85740),B=n(64504),_=n(62630),N=n(27572),U=n(28309),M=n(14391),F=n(85277),H=function(e){var t=e.parentPostId,n=e.placeholder,r=e.hideReplyEditing,i=void 0===r?function(){}:r,s=e.editorOpenByDefault,h=void 0===s||s,E=e.showEditorHeader,v=void 0===E||E,b=Boolean((0,j.P5)("enable_lite_publish_to_profile")),y=c.useContext(m.D),x=y.setIsSavingResponse,S=y.responsesLocked,P=y.inResponseToQuote,w=y.setInResponseToQuote,R=c.useContext(g.H),I=R.showThreadedResponses,O=R.isThreadedResponsesQueryLoading,T=c.useState(M.Et.NOT_DISTRIBUTED),k=l()(T,2),H=k[0],W=k[1],V=function(){H===M.Et.DISTRIBUTED?W(M.Et.NOT_DISTRIBUTED):W(M.Et.DISTRIBUTED)},Q=(0,N.pK)(),z=(0,_.Av)(),G=(0,u.I0)(),Y=(0,U.Iq)(),Z=c.useRef(null);c.useEffect((function(){var e;null!=Z&&null!==(e=Z.current)&&void 0!==e&&e.getBoundingClientRect&&Z.current.getBoundingClientRect().bottom>window.innerHeight&&Z.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var $=function(e){return function(){var n=a()(o().mark((function n(r,i){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({variables:{inResponseToPostId:t,deltas:r,inResponseToQuoteId:null==P?void 0:P.id}});case 2:a=n.sent,i(a.data.savePostResponse.id);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};return c.createElement(D,{parentPostId:t},(function(e){var r=e.publishResponse,s=e.loading,l=e.error;return(0,d._M)(l)||S?(x(!1),c.createElement(f.R,{message:L.x})):c.createElement(A.P,null,(function(e){var l,u=e.saveResponse;return c.createElement("div",{ref:Z},c.createElement(B.F,{scale:"M",color:"DARKER",tag:"div"},c.createElement("div",{className:Y({lineHeight:"24px"})},c.createElement(L.j,{postId:t,isPublishingResponse:s,publishResponse:(l=r,function(e,n){return x(!0),l({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:null==P?void 0:P.id,responseDistribution:H}}).then((function(e){var r=e.data&&e.data.publishPostThreadedResponse,o=(0,d.ed)(e.errors);if(r)return z.event("inlineEditor.publish",{postId:t,context:p.r.INLINE_POST_RESPONSE,source:Q}),x(!1),I(),H===M.Et.DISTRIBUTED&&(G((0,F.Dx)({message:"",toastStyle:"PUBLISH_RESPONSE",extraParams:{response:r},duration:5e3})),W(M.Et.NOT_DISTRIBUTED)),n();o&&(x(!1),G((0,F.Dx)({message:"You’ve reached the limit for stories that can be published in one day. Please try again tomorrow.",toastStyle:"ERROR"})))}))}),saveResponse:$(u),type:C.H.create,inResponseToQuote:P,onClose:a()(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(void 0),i(),e.abrupt("return",{});case 3:case"end":return e.stop()}}),e)}))),editorOpenByDefault:h,placeholder:n,showEditorHeader:v,disableReplyButton:O,showPublishCheckbox:b&&!h,responseDistribution:H,toggleResponseDistribution:V}))))}))}))}},30049:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});var r=n(67294),o=n(203),i=n(64504),a=n(27952),s=function(e){var t=e.message||"The author has closed discussion for this story.";return r.createElement(o.xu,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},r.createElement(i.F,{scale:"M",tag:"span",color:"DARKER"},t," ",r.createElement(o.rU,{href:(0,a.VG)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},53945:(e,t,n)=>{"use strict";n.d(t,{P:()=>u});var r=n(28655),o=n.n(r),i=n(71439),a=n(80439),s=n(67294);function l(){var e=o()(["\n  mutation savePostResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n  ) {\n    savePostResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n    ) {\n      ... on Post {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,i.Ps)(l()),u=function(e){var t=e.children;return s.createElement(a.mm,{mutation:c},(function(e){return t({saveResponse:e})}))}},19537:(e,t,n)=>{"use strict";var r;n.d(t,{H:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},18608:(e,t,n)=>{"use strict";n.d(t,{x:()=>X,j:()=>oe});var r=n(63038),o=n.n(r),i=n(87757),a=n.n(i),s=n(48926),l=n.n(s),c=n(59713),u=n.n(c),d=n(67294),p=n(12291),m=n(84792),g=n(10143),f=n(26600),h=n(25772),E=n(78067),v=n(22470),b=n(54803),y=n(9735),x=n(24548),S=n(42963),P=n(32262),w=n(203),R=n(28309),I=n(74465),O=n(93394),T=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}},k=function(e){var t=e.isEdit,n=e.saveResponse,r=e.setDraftResponseId,o=(0,R.Iq)(),i="editorPopoverMenu";return d.createElement(w.Bn,null,(function(e){var a=e.isVisible,s=e.toggle,l=e.hide;return d.createElement(w.J2,{ariaId:i,isVisible:a,hide:l,customZIndex:I.ZP.responseSidebarPopover,noArrow:!0,placement:"bottom-end",popoverRenderFn:function(){return d.createElement(P.mX,null,d.createElement(P.Sl,null,d.createElement(w.rU,{onClick:t&&r?r:n,"data-testid":"saveResponseMenuItem"},"Make this response a story")))}},d.createElement(w.rU,{ariaControls:i,ariaExpanded:a?"true":"false",onClick:s,className:o(T),"data-testid":"editorMenu"},d.createElement(O.Z,null)))}))},D=n(19692),A=n(14391),C=n(83024),L=function(e){var t=e.quote,n=(0,R.Iq)();if(!t)return null;var r=(0,C.eu)(t);return r?d.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},d.createElement(D.ZP,{paragraph:r,paragraphStyle:A.NJ.P,spaceTop:4,richTextStyle:"STREAM"})):null},j=function(e){var t=e.onFocus,n=e.responseContent,r=e.setResponseContent,o=e.setIsEmpty,i=e.isEditorOpen,a=(0,R.Iq)();return d.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;o(!t),r(t)},onFocus:t,className:a({width:"100%",padding:"14px",resize:"none",minHeight:i?"100px":"0",height:i?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},B=n(19537),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[],o=e.split("\n");return n&&(r=[{type:8,index:0,section:{name:N(),startIndex:0}}]),o.forEach((function(e,t){r.push({type:1,paragraph:{markups:[],name:N(),text:e,type:1},verifySameName:!1,index:t})})),r},N=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},U=n(85740),M=n(9785),F=n(62181),H=n(98281),W=n(42933),V=n(36544),Q=function(e){var t=e.isVisible,n=e.hide,r=(0,M.YC)().value;return d.createElement(V.C,null,(function(e){var o=e.mutate;return d.createElement(w.QH,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){o()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==r?void 0:r.unverifiedEmail,".")}))},z=n(64504),G=n(62630),Y=n(27572),Z=n(27952),$=n(29035);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X="The author has closed discussion for this story. We are unable to save changes to your response.",J=function(){return{"& button":{border:"none"}}},ee="400ms",te="300ms",ne=function(e,t){var n=K(K({},t),{},{display:"flex",padding:"0 14px"});return K(K({},n),{},e?{transition:"opacity ".concat(ee,", max-height ").concat(ee),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(ee,", max-height ").concat(ee),opacity:0,maxHeight:0})},re=function(e){return e?{transition:"min-height ".concat(ee),minHeight:"100px"}:{transition:"min-height ".concat(ee),minHeight:"15px"}},oe=function(e){var t,n=e.postId,r=e.responseId,i=e.createdAt,s=e.isPublishingResponse,c=e.disableReplyButton,u=void 0!==c&&c,P=e.publishResponse,I=e.saveResponse,O=void 0===I?function(){return Promise.resolve()}:I,T=e.type,D=void 0===T?B.H.create:T,C=e.onClose,N=void 0===C?l()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):C,V=e.inResponseToQuote,q=e.initialValue,X=e.placeholder,oe=void 0===X?"What are your thoughts?":X,ie=e.editorOpenByDefault,ae=void 0!==ie&&ie,se=e.showEditorHeader,le=void 0===se||se,ce=e.showPublishCheckbox,ue=void 0!==ce&&ce,de=e.responseDistribution,pe=void 0===de?A.Et.NOT_DISTRIBUTED:de,me=e.toggleResponseDistribution,ge=void 0===me?function(){}:me,fe=D===B.H.edit,he=(0,R.Iq)(),Ee=(0,G.Av)(),ve=(0,Y.pK)(),be=(0,$.rO)(navigator.userAgent),ye=Boolean((0,U.P5)("enable_lite_threaded_responses"))&&D===B.H.edit,xe=(0,f.c)().value,Se=(0,y.Vz)([y.Fm]),Pe=Se.editor,we=Se.renderLeaf,Re=Se.renderElement,Ie=d.useState(fe||ae),Oe=o()(Ie,2),Te=Oe[0],ke=Oe[1],De=d.useState(!0),Ae=o()(De,2),Ce=Ae[0],Le=Ae[1],je=d.useState((t=q)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),Be=o()(je,2),_e=Be[0],Ne=Be[1],Ue=d.useState(void 0),Me=o()(Ue,2),Fe=Me[0],He=Me[1],We=d.useState(!1),Ve=o()(We,2),Qe=Ve[0],ze=Ve[1],Ge=d.useCallback((function(){return ze(!1)}),[]),Ye=(0,p.v9)((function(e){return e.config.authDomain})),Ze=(0,M.YC)().value,$e=d.useCallback((function(){N().then((function(e){e.preventStateUpdate||(ke(!1),be?Ne(""):(0,b.oe)(Pe))}))}),[ke]);if(d.useEffect((function(){V&&ke(!0)}),[V]),d.useEffect((function(){Le(m.Node.string(Pe).toString().trim().length<=0)}),[xe]),d.useEffect((function(){Te&&!be&&(ae||ye||g.F3.blur(Pe),setTimeout((function(){return g.F3.focus(Pe)}),0))}),[Te]),Fe)return Ee.event("inlineEditor.expand",{postId:n,context:E.r.INLINE_POST_RESPONSE,source:ve}),d.createElement(S.Z,{to:(0,Z.d0)(Ye,Fe)});var qe,Ke,Xe=d.createElement(d.Fragment,null,!ue&&d.createElement("div",{className:he(J)},d.createElement(w.zx,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return $e()}},"Cancel")),d.createElement(w.zx,{buttonStyle:"STRONG",size:"SMALL",disabled:Ce||s||m.Node.string(Pe)===_e||u,onClick:function(){var e=be?_(_e,fe?{includeInitialDeltas:!1}:void 0):(0,b.wB)(Pe,fe?{includeInitialDeltas:!1}:void 0);null!=Ze&&Ze.unverifiedEmail?ze(!0):P(e,$e)}},fe?"Update":"Respond"));return d.createElement(W.Z,{marginBottom:ae?"0":"20px",padding:fe?"0":"0 24px",paddingTop:ae?"0":"20px"},d.createElement("div",{className:he({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:Te?"14px":"0",paddingBottom:Te?"14px":"0",transition:"padding-top ".concat(ee,", padding-bottom ").concat(ee)})},Ze&&le&&d.createElement("div",{className:he((qe=Te,Ke={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},K(K({},Ke),{},qe?{transition:"opacity ".concat(ee,", max-height ").concat(ee,", margin-bottom ").concat(ee),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(te,", max-height ").concat(te,", margin-bottom ").concat(te),opacity:0,maxHeight:0,marginBottom:"0"})))},d.createElement(W.Z,{display:"flex",alignItems:"center"},d.createElement(H.ZP,{scale:"XS",user:Ze}),d.createElement(W.Z,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},d.createElement(z.F,{scale:"M",color:"DARKER"},Ze.name),fe&&i&&d.createElement(z.F,{scale:"M",color:"LIGHTER"},d.createElement(x.Z,{timestamp:i})))),Te&&!ue&&d.createElement(W.Z,{display:"flex",justifyContent:"flex-end"},d.createElement(k,{isEdit:fe,setDraftResponseId:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return He(r)})),saveResponse:function(){var e=be?_(_e):(0,b.wB)(Pe);return O(e,He)}}))),Te&&d.createElement(L,{quote:V}),d.createElement(W.Z,{display:"flex",flexDirection:"column"},Ze?d.createElement("div",{className:he(re(Te))},be?d.createElement(j,{onFocus:function(){return ke(!0)},responseContent:_e,setIsEmpty:Le,setResponseContent:Ne,isEditorOpen:Te}):d.createElement(W.Z,{padding:"14px"},d.createElement(v.c,{editor:Pe},d.createElement(h.O,{onFocus:function(){return ke(!0)},renderLeaf:we,renderElement:Re,placeholder:oe})))):d.createElement(F.R9,{operation:"register",susiEntry:"respond_sidebar"},d.createElement(W.Z,{padding:"14px"},d.createElement(z.F,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),ue?d.createElement("div",{className:he(ne(Te,{justifyContent:"space-between"}))},d.createElement(w.XZ,{onChange:ge,checked:pe===A.Et.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px"},"Also publish to my profile"),Xe):d.createElement("div",{className:he(ne(Te,{alignSelf:"flex-end"}))},Xe))),d.createElement(Q,{isVisible:Qe,hide:Ge}))}},76267:(e,t,n)=>{"use strict";n.d(t,{k:()=>qe});var r=n(63038),o=n.n(r),i=n(67294),a=n(12291),s=n(86156),l=n(319),c=n.n(l),u=n(59713),d=n.n(u),p=n(46829),m=n(2074),g=n(51176),f=n(14267),h=n(72558),E=n(68356),v=n.n(E),b=n(19537),y=n(79853),x=n(90320);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={delay:1e3,timeout:2e4,loading:function(e){return e.error?i.createElement(y.Z,{error:e.error}):e.timedOut?i.createElement(y.Z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?i.createElement(x.Z,null):null}},R=v()(P(P({},w),{},{loader:function(){return n.e(6635).then(n.bind(n,97980))},modules:["src/components/responses/editor/InlineResponseEditor"],webpack:function(){return[97980]},render:function(e,t){var n=e.InlineResponseEditor;return i.createElement(n,t)}})),I=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?b.H.create:r,a=e.initialValue;return i.createElement(R,{parentPostId:t,responseId:n,type:o,initialValue:a})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={delay:1e3,timeout:2e4,loading:function(e){return e.error?i.createElement(y.Z,{error:e.error}):e.timedOut?i.createElement(y.Z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?i.createElement(x.Z,null):null}},D=v()(T(T({},k),{},{loader:function(){return n.e(6635).then(n.bind(n,51245))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[51245]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return i.createElement(n,t)}})),A=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?b.H.create:r,a=e.initialValue;return i.createElement(D,{parentPostId:t,responseId:n,type:o,initialValue:a})},C=n(85740),L=n(27572),j=function(e){var t,n,r=e.responsePost,a=e.index,s=e.parentPost,l=e.omitBottomBorder,u=Boolean((0,C.P5)("enable_lite_threaded_responses")),d=i.useState(!1),p=o()(d,2),m=p[0],E=p[1],v=i.useState(null),y=o()(v,2),x=y[0],S=y[1],P=i.useContext(f.D),w=P.editingResponsesAtIndices,R=P.setEditingResponsesAtIndices;return i.useEffect((function(){if(m&&!w.includes(a)&&R([].concat(c()(w),[a])),!m&&w.includes(a)){var e=w.filter((function(e){return e!==a}));R(e)}}),[m,w,R]),r?m?i.createElement(g.Q.Provider,{value:{isEditing:m,setIsEditing:E,latestRev:null==r?void 0:r.latestRev,createdAt:null==r?void 0:r.createdAt,setEditingQuote:S,editingQuote:x}},i.createElement(L.cW,{source:{index:a},key:r.id,extendSource:!0},u?i.createElement(A,{type:b.H.edit,parentPostId:s.id,responseId:r.id,initialValue:null==r||null===(t=r.content)||void 0===t?void 0:t.bodyModel}):i.createElement(I,{type:b.H.edit,parentPostId:s.id,responseId:r.id,initialValue:null==r||null===(n=r.content)||void 0===n?void 0:n.bodyModel}))):i.createElement(g.Q.Provider,{value:{isEditing:m,setIsEditing:E,setEditingQuote:S,editingQuote:x}},i.createElement(L.cW,{source:{index:a},key:r.id,extendSource:!0},i.createElement(h.OT,{parentPost:s,simpleResponse:r,omitBottomBorder:l}))):null},B=n(203),_=n(28309),N={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},U=function(){var e=(0,_.om)({shimmerKeyframesName:N}).shimmerKeyframesName,t=(0,_.Iq)();return i.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},i.createElement(B.xu,{display:"flex",flexDirection:"row"},i.createElement(B.xu,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),i.createElement(B.xu,{marginLeft:"8px",marginTop:"4px"},i.createElement(B.xu,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),i.createElement(B.xu,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),i.createElement(B.xu,{marginTop:"12px"},i.createElement(B.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),i.createElement(B.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),i.createElement(B.xu,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))},M=n(64504),F=n(15699),H=n(14391),W=n(81162),V=n(14349),Q=n(27390),z=n(27952),G=n(24745),Y=n(51151),Z=n(26912);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q,K=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},X=function(e){var t,n,r=e.storyResponse,o=e.parentPost,a=e.omitBottomBorder,s=(0,_.Iq)(),l=(0,_.Fg)(),c=r.creator,u=r.previewContent,d=r.mediumUrl,p=r.clapCount,m=r.responsesCount,g=null==u||null===(t=u.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(c&&u&&u.bodyModel&&d&&g))return null;var f=function(e){var t,n=[],r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.text&&(n.push(o),n.length>=2))break}}catch(e){r.e(e)}finally{r.f()}return{title:n[0],subtitle:n[1]}}(g);if(!f.title&&!f.subtitle)return null;var h,E=null!==(null===(n=r.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),v=m||0;return i.createElement(F.Z,{post:r,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},i.createElement(B.xu,{paddingTop:"25px",paddingBottom:"20px",borderBottom:a?void 0:"BASE_LIGHTER"},i.createElement(G.E,{response:r,responseType:Z.Q.STORY,parentPost:o}),i.createElement(Y.J,{inResponseToMediaResource:r.inResponseToMediaResource}),i.createElement(B.P3,{href:(0,z.jV)(r)},i.createElement("div",{className:s({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:E?"12px":"16px",backgroundColor:l.backgroundColor})},i.createElement("div",{className:s(K)},i.createElement(M.F,{scale:"S",color:"LIGHTER",tag:"div"},i.createElement(B.xu,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:p>0||v>0?"20px":"0"},p>0?i.createElement(B.xu,{display:"flex",alignItems:"center"},i.createElement(B.xu,{tag:W.Z,marginRight:"2px"}),i.createElement("div",null,(0,Q.pY)(p))):null,v>0?i.createElement(B.xu,{display:"flex",alignItems:"center"},i.createElement(B.xu,{tag:V.Z,marginLeft:p?"8px":"0",marginRight:"2px"}),i.createElement("div",null,(0,Q.pY)(v))):null))),i.createElement(M.F,{scale:"M",clamp:2,color:"DARKER"},f.title&&i.createElement(B.xu,null,f.title.text),f.subtitle&&i.createElement("div",{className:s((h=f.title.type,function(e){return{color:h===H.NJ.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},f.subtitle.text))))))},J=n(9785),ee=n(6688),te=n(93394),ne=n(32262),re=n(31078),oe={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},ie=function(e){var t=e.parentPostId,n=e.responsesLocked,r=e.isPopoverMenuVisible,o=e.hidePopoverMenu,s=(0,ee.I)(),l=(0,a.v9)((function(e){return e.config.authDomain})),c=i.useRef(null);return i.useEffect((function(){var e=function(e){var t;null!=c&&null!==(t=c.current)&&void 0!==t&&t.contains(e.target)||o()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),i.createElement("div",{className:s(oe),ref:c},i.createElement(ne.mX,null,i.createElement(ne.Sl,null,i.createElement(B.rU,{href:(0,z.t$)(l,t)},"Manage responses")),i.createElement(re.Eq,{parentPostId:t,responsesLocked:n,hidePopoverMenu:o})))},ae=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},se=function(e){var t,n,r=e.parentPost,a=e.responsesLocked,s=(0,ee.I)(),l=(0,J.YC)().value,c="managementPopoverMenu",u=i.useState(!1),d=o()(u,2),p=d[0],m=d[1],g=(null==l?void 0:l.id)===(null===(t=r.creator)||void 0===t?void 0:t.id),f=null==r||null===(n=r.collection)||void 0===n?void 0:n.viewerIsEditor;return g||f?i.createElement(B.xu,null,i.createElement(B.rU,{ariaControls:c,ariaExpanded:p?"true":"false",onClick:function(e){e.nativeEvent.stopPropagation(),m(!p)},inline:!0,className:s(ae)},i.createElement(te.Z,null)),p&&i.createElement("div",{id:c,className:s({position:"relative"})},i.createElement(L.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},i.createElement(ie,{parentPostId:r.id,responsesLocked:a,isPopoverMenuVisible:p,hidePopoverMenu:function(){return m(!1)}})))):null},le=n(24087),ce=n(3149),ue=n(31235);!function(e){e.StoryResponse="StreamItemPostStoryResponse",e.SimpleResponse="StreamItemPostSimpleResponse"}(q||(q={}));var de={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},pe=function(e,t,n){return{backgroundColor:e&&e.id&&e.id===(t&&t.id)?n.highlightColor.light:void 0,padding:"0 24px"}},me=function(e){var t,n,r,a=e.responses,s=e.parentPost,l=e.responsesLocked,c=e.isLockedResponse,u=e.isLoadingInitialContent,d=e.isFetchingNextSetOfResponses,p=e.isResponsesSidebarVisible,m=e.setIsResponsesSidebarVisible,g=e.inResponseToQuote,h=e.setInResponseToQuote,E=(0,_.Iq)(),v=(0,_.Fg)(),b=(0,ue.xg)(),y=i.useState(!1),x=o()(y,2),S=x[0],P=x[1],w=i.useState([]),R=o()(w,2),O=R[0],T=R[1],k=s.id,D=null!=a&&a.count&&0!==(null==a?void 0:a.count)?"(".concat(null==a?void 0:a.count,")"):"",A=null==a||null===(t=a.responsesConnection)||void 0===t?void 0:t.stream,C=null==a||null===(n=a.responsesConnection)||void 0===n||null===(r=n.pagingInfo)||void 0===r?void 0:r.next,N=A&&a&&a.count&&(null==A?void 0:A.length)<(null==a?void 0:a.count)-1,F=d&&C&&N;return i.createElement(f.D.Provider,{value:{setIsSavingResponse:P,responsesLocked:l,isLockedResponse:c,editingResponsesAtIndices:O,setEditingResponsesAtIndices:T,inResponseToQuote:g,setInResponseToQuote:h,sidebarRef:null}},p&&S&&i.createElement(B.TF,{horizontalOverride:{left:"calc(100vw - ".concat(ye,")")}}),i.createElement(B.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},i.createElement(M.X6,{scale:"S"},"Responses ",D),i.createElement(B.xu,{display:"flex",flexDirection:"row"},i.createElement(se,{parentPost:s,responsesLocked:l}),i.createElement(B.xu,{position:"relative",right:"-7px"},i.createElement(ce.Z,{onClick:function(){return m(!1)},size:"REGULAR",isPositionAbsolute:!1})))),u?i.createElement(B.xu,{padding:"0 24px"},i.createElement(U,null)):i.createElement(i.Fragment,null,!b||p?i.createElement(I,{parentPostId:k}):null,a&&0!==(null==A?void 0:A.length)?i.createElement(le.Z,null,(function(e){return i.createElement(B.xu,null,null==A?void 0:A.map((function(t,n){var r=t.itemType.__typename,o=O.includes(n+1),a=A.length-1===n;switch(r){case q.SimpleResponse:var l=t.itemType;return l.post?i.createElement("div",{key:l.post.id,className:E(pe(e,l.post.creator,v))},i.createElement(j,{responsePost:l.post,index:n,parentPost:s,omitBottomBorder:o||a})):null;case q.StoryResponse:var c=t.itemType;return c.post?i.createElement(L.cW,{source:{index:n},key:c.post.id,extendSource:!0},i.createElement("div",{className:E(pe(e,c.post.creator,v))},i.createElement(X,{storyResponse:c.post,parentPost:s,omitBottomBorder:o||a}))):null;default:return null}})),F&&i.createElement(U,null))})):i.createElement("div",{className:E(de)},i.createElement(M.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),i.createElement(M.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},ge=n(324),fe=n(80637);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve,be=function(){return{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",pointerEvents:"none"}},ye="414px",xe=function(e){return d()({width:ye,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,fe.sm)(e),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"})},Se=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},Pe=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},we=function(e){var t,n,r,a,s,l=e.setIsResponsesSidebarVisible,c=e.isResponsesSidebarVisible,u=e.inResponseToQuote,d=e.setInResponseToQuote,g=e.parentPost,f=(0,ge.Uo)().baseTheme,h=(0,_.Iq)(),E=(0,ue.xg)(),v=(0,p.useLazyQuery)(m.gl,{variables:{postId:g.id,postResponsesPaging:{limit:10}},ssr:!1}),b=o()(v,2),y=b[0],x=b[1],S=x.called,P=x.loading,w=x.data,R=x.fetchMore;S||E&&!c||y();var I,O=null==w||null===(t=w.post)||void 0===t?void 0:t.responsesLocked,T=null==w||null===(n=w.post)||void 0===n?void 0:n.isLockedResponse,k=null==w||null===(r=w.post)||void 0===r?void 0:r.postResponses,D=i.useState(0),A=o()(D,2),C=A[0],j=A[1],N=i.useState(!1),U=o()(N,2),M=U[0],F=U[1];i.useEffect((function(){C||j(window.innerWidth)}),[]);var H=null==k||null===(a=k.responsesConnection)||void 0===a||null===(s=a.pagingInfo)||void 0===s?void 0:s.next;if(H){var W={postId:g.id,postResponsesPaging:{limit:H.limit,to:H.to}};I=function(){return R({variables:W,updateQuery:function(e,t){var n=t.fetchMoreResult;return F(!1),Ie(e,n)}})}}return i.createElement(B.f6,{theme:f},i.createElement(L.cW,{source:{name:"responses",postId:g.id},extendSource:!0},i.createElement(B.xu,{print:{display:"none"}},i.createElement("div",{className:h([be,Pe(c)]),onClick:function(){l(!1)},"aria-hidden":!c}),i.createElement("div",{className:h([xe,Se(c,C)]),"aria-hidden":!c,onScroll:function(e){return Re(e,H,M,F,I)}},i.createElement(me,{responses:k,parentPost:g,responsesLocked:O,isLockedResponse:T,isLoadingInitialContent:P,isFetchingNextSetOfResponses:M,isResponsesSidebarVisible:c,setIsResponsesSidebarVisible:l,inResponseToQuote:u,setInResponseToQuote:d})))))},Re=function(e,t,n,r,o){e.preventDefault();var i=e.currentTarget;i.scrollHeight-i.scrollTop-i.clientHeight<1.5*i.clientHeight&&t&&!n&&(r(!0),o())},Ie=function(e,t){var n,r,o,i,a,s,l,u,d=null==t||null===(n=t.post)||void 0===n?void 0:n.postResponses,p=null==t?void 0:t.post;if(!p||!d||null===(r=d.responsesConnection)||void 0===r||!r.stream)return e;var m=(null==e||null===(o=e.post)||void 0===o||null===(i=o.postResponses)||void 0===i||null===(a=i.responsesConnection)||void 0===a?void 0:a.stream)||[],g=(null==t||null===(s=t.post)||void 0===s||null===(l=s.postResponses)||void 0===l||null===(u=l.responsesConnection)||void 0===u?void 0:u.stream)||[];return{post:Ee(Ee({},p),{},{postResponses:Ee(Ee({},d),{},{responsesConnection:Ee(Ee({},d.responsesConnection),{},{stream:[].concat(c()(m),c()(g))})})})}},Oe=n(26600),Te=n(54260),ke=n(47076),De=n(22091);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(ve||(ve={}));var Le=function(e,t){return{marginBottom:t?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(e.baseColor.border.lighter)}},je=function(e,t){var n,r,o,i,a,s,l=null==t||null===(n=t.post)||void 0===n?void 0:n.threadedPostResponses,u=null==t?void 0:t.post,d=null==t||null===(r=t.post)||void 0===r?void 0:r.threadedPostResponses;if(!(u&&l&&l.posts&&d))return e;var p=(null==e||null===(o=e.post)||void 0===o||null===(i=o.threadedPostResponses)||void 0===i?void 0:i.posts)||[],m=(null==t||null===(a=t.post)||void 0===a||null===(s=a.threadedPostResponses)||void 0===s?void 0:s.posts)||[];return{post:Ce(Ce({},u),{},{threadedPostResponses:Ce(Ce({},d),{},{posts:[].concat(c()(p),c()(m))})})}},Be=function(e){var t,n=e.replies,r=e.parentPost,o=e.inResponseToPostId,a=e.threadDepth,s=void 0===a?0:a,l=e.displayBottomBorder,c=void 0!==l&&l;return i.createElement(De.xu,null,null==n||null===(t=n.posts)||void 0===t?void 0:t.map((function(e,t,n){if(!e)return null;var a=t!==n.length-1||c;return i.createElement(_e,{reply:e,parentPost:r,bottomBorder:a,index:t,inResponseToPostId:o,key:e.id,threadDepth:s})})))},_e=function(e){var t,n,r,a,s,l,c,u,d=e.reply,g=e.parentPost,h=e.bottomBorder,E=e.index,v=e.inResponseToPostId,b=e.threadDepth,y=void 0===b?0:b,x=(0,_.Iq)(),S=(0,_.Fg)(),P=i.useContext(f.D),w=P.responsesLocked,R=P.isLockedResponse,I=P.inResponseToQuote,O=P.setInResponseToQuote,T=P.setIsSavingResponse,k=P.sidebarRef,D=i.useState([]),A=o()(D,2),C=A[0],B=A[1],N=i.useRef(null),F=null===(t=d.creator)||void 0===t?void 0:t.name;F&&(u="Replying to ".concat(F));var W=(0,p.useLazyQuery)(m.Ag,{variables:{postId:d.id,postResponsesPaging:{limit:10}},ssr:!1}),V=o()(W,2),Q=V[0],z=V[1],G=z.called,Y=z.data,Z=z.loading,$=z.fetchMore;i.useEffect((function(){var e;null!=N&&null!==(e=N.current)&&void 0!==e&&e.getBoundingClientRect&&N.current.getBoundingClientRect().bottom>window.innerHeight&&N.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var q,K=null==Y||null===(n=Y.post)||void 0===n?void 0:n.threadedPostResponses,J=(null==K?void 0:K.posts)&&((null===(r=d.postResponses)||void 0===r?void 0:r.count)||0)>(null===(a=K.posts)||void 0===a?void 0:a.length),ee=J&&((null==d||null===(s=d.postResponses)||void 0===s?void 0:s.count)||0)-((null==K||null===(l=K.posts)||void 0===l?void 0:l.length)||0),te=null==K||null===(c=K.pagingInfo)||void 0===c?void 0:c.next;return te&&(q=function(){return $({variables:{postId:d.id,postResponsesPaging:{limit:te.limit,to:te.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return je(e,n)}})}),i.createElement(De.Bn,null,(function(e){var t=e.isVisible,n=e.toggle,r=e.show;return i.createElement(De.Bn,null,(function(e){var o,a=e.isVisible,s=e.hide,l=e.toggle;return i.createElement(De.xu,{borderBottom:h?"BASE_LIGHTER":"NONE",margin:"0 24px"},i.createElement(Te.H.Provider,{value:{inResponseToPostId:v,isThreadedResponsesVisible:t,toggleThreadedResponses:function(){G||Q(),n()},showThreadedResponses:function(){G||Q(),r()},threadDepth:y,hideCreateReply:s,toggleCreateReply:l,loadThreadedResponses:Q,isThreadedResponsesQueryCalled:G,isThreadedResponsesQueryLoading:Z}},i.createElement("div",{ref:0===E?N:void 0},function(e){switch(e.inResponseToType){case ve.STORY:case ve.LEGACY:return e.content.bodyModel.paragraphs.every((function(e){return e.type===H.NJ.P&&0===e.markups.length}));default:return!0}}(d)?i.createElement(j,{responsePost:d,index:E,parentPost:g,omitBottomBorder:!0}):i.createElement(L.cW,{source:{index:E},key:d.id,extendSource:!0},i.createElement(X,{storyResponse:d,parentPost:g,omitBottomBorder:!0}))),a&&i.createElement("div",{className:x(Le(S,t))},i.createElement(L.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},i.createElement(Oe.z,null,i.createElement(ke.Z,{parentPostId:d.id,hideReplyEditing:s,placeholder:u,showEditorHeader:!1}))))),t&&i.createElement("div",{className:x(Le(S,J))},Z&&i.createElement(De.xu,{marginLeft:"24px"},i.createElement(U,null)),(null==K?void 0:K.posts)&&(null===(o=K.posts)||void 0===o?void 0:o.length)>0&&i.createElement(f.D.Provider,{value:{setIsSavingResponse:T,responsesLocked:w,isLockedResponse:R,editingResponsesAtIndices:C,setEditingResponsesAtIndices:B,inResponseToQuote:I,setInResponseToQuote:O,sidebarRef:k}},i.createElement(Be,{replies:K,parentPost:g,inResponseToPostId:d.id,threadDepth:y+1}))),t&&J&&i.createElement(De.xu,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},i.createElement(M.F,{color:"ACCENT",scale:"M"},i.createElement(De.rU,{linkStyle:"OBVIOUS",onClick:q},"Load more replies (".concat(ee,")")))))}))}))},Ne=n(33914);function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Me=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.99 5.04c.26-.21.64-.22.91-.01.97.72 1.77 1.21 2.6 1.54.83.32 1.72.48 2.89.5.41.01.74.35.74.76-.02 3.62-.43 6.26-1.45 8.21-1.03 1.98-2.66 3.21-4.97 4.08a.75.75 0 0 1-.53 0c-2.25-.87-3.86-2.1-4.9-4.07-1.02-1.95-1.46-4.59-1.48-8.22 0-.41.33-.75.75-.76 1.19-.02 2.1-.18 2.92-.5.82-.32 1.6-.81 2.52-1.53zm.46.9c-.9.69-1.71 1.21-2.62 1.56a8.9 8.9 0 0 1-3.02.57c.03 3.45.46 5.82 1.36 7.51.88 1.69 2.25 2.77 4.28 3.57 2.1-.8 3.47-1.89 4.34-3.57.89-1.7 1.3-4.07 1.34-7.51a8.8 8.8 0 0 1-3-.57 11.8 11.8 0 0 1-2.68-1.56zm0 9.15a2.67 2.67 0 1 0 0-5.34 2.67 2.67 0 0 0 0 5.34zm0 1a3.67 3.67 0 1 0 0-7.34 3.67 3.67 0 0 0 0 7.34zm-1.82-3.77l.53-.53.91.92 1.63-1.63.52.53-2.15 2.15-1.44-1.44z"});const Fe=function(e){return i.createElement("svg",Ue({width:25,height:25,viewBox:"0 0 25 25"},e),Me)};var He=function(){var e=(0,_.Iq)();return i.createElement(Ne._,{tooltipText:"View community guidelines"},i.createElement(B.rU,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},i.createElement(Fe,null)))},We={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},Ve=function(e){var t,n,r,a=e.responses,s=e.parentPost,l=e.responsesLocked,c=e.isLockedResponse,u=e.isLoadingInitialContent,d=e.isFetchingNextSetOfResponses,p=e.isResponsesSidebarVisible,m=e.setIsResponsesSidebarVisible,g=e.inResponseToQuote,h=e.setInResponseToQuote,E=e.sidebarRef,v=(0,_.Iq)(),b=(0,ue.xg)(),y=i.useState(!1),x=o()(y,2),S=x[0],P=x[1],w=i.useState([]),R=o()(w,2),I=R[0],O=R[1],T=s.id,k=(null===(t=s.postResponses)||void 0===t?void 0:t.count)||0,D=0!==k?"(".concat(k,")"):"",C=a,L=null==a||null===(n=a.pagingInfo)||void 0===n?void 0:n.next,j=(null==a?void 0:a.posts)&&k&&a.posts.length<k,N=Boolean(d&&L&&j);return i.createElement(f.D.Provider,{value:{setIsSavingResponse:P,responsesLocked:l,isLockedResponse:c,editingResponsesAtIndices:I,setEditingResponsesAtIndices:O,inResponseToQuote:g,setInResponseToQuote:h,sidebarRef:E}},p&&S&&i.createElement(B.TF,{horizontalOverride:{left:"calc(100vw - ".concat(ye,")")}}),i.createElement(B.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},i.createElement(M.X6,{scale:"S"},"Responses ",D),i.createElement(B.xu,{display:"flex",flexDirection:"row"},i.createElement(He,null),i.createElement(se,{parentPost:s,responsesLocked:l}),i.createElement(B.xu,{position:"relative",right:"-7px"},i.createElement(ce.Z,{onClick:function(){return m(!1)},size:"REGULAR",isPositionAbsolute:!1})))),u?i.createElement(B.xu,{padding:"0 24px"},i.createElement(U,null)):i.createElement(i.Fragment,null,!b||p?i.createElement(A,{parentPostId:T}):null,a&&0!==(null==C||null===(r=C.posts)||void 0===r?void 0:r.length)?i.createElement(B.xu,null,i.createElement(Be,{replies:a,inResponseToPostId:s.id,parentPost:s,displayBottomBorder:N}),N&&i.createElement(B.xu,{margin:"0 24px"},i.createElement(U,null))):i.createElement("div",{className:v(We)},i.createElement(M.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),i.createElement(M.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},Qe=function(){return{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",pointerEvents:"none"}},ze=function(e){return function(t){var n=d()({width:"414px",position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,fe.sm)(t),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"});return e||(n.display="none"),n}},Ge=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},Ye=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},Ze=function(e){var t,n,r,a,s=e.setIsResponsesSidebarVisible,l=e.isResponsesSidebarVisible,c=e.inResponseToQuote,u=e.setInResponseToQuote,d=e.parentPost,g=(0,_.Iq)(),f=(0,ue.xg)(),h=i.useRef(null),E=(0,p.useLazyQuery)(m.Ag,{variables:{postId:d.id,postResponsesPaging:{limit:10}},ssr:!1}),v=o()(E,2),b=v[0],y=v[1],x=y.called,S=y.loading,P=y.data,w=y.fetchMore;x||f&&!l||b();var R,I=null==P||null===(t=P.post)||void 0===t?void 0:t.responsesLocked,O=null==P||null===(n=P.post)||void 0===n?void 0:n.isLockedResponse,T=null==P||null===(r=P.post)||void 0===r?void 0:r.threadedPostResponses,k=i.useState(0),D=o()(k,2),A=D[0],C=D[1],j=i.useState(!1),N=o()(j,2),U=N[0],M=N[1];i.useEffect((function(){A||C(window.innerWidth)}),[]);var F=null==T||null===(a=T.pagingInfo)||void 0===a?void 0:a.next;return F&&(R=function(){return w({variables:{postId:d.id,postResponsesPaging:{limit:F.limit,to:F.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return M(!1),je(e,n)}})}),i.createElement(ge.N8,null,i.createElement(L.cW,{source:{name:"responses",postId:d.id},extendSource:!0},i.createElement(B.xu,{print:{display:"none"}},i.createElement("div",{className:g([Qe,Ye(l)]),onClick:function(){s(!1)},"aria-hidden":!l}),i.createElement("div",{className:g([ze(l),Ge(l,A)]),"aria-hidden":!l,onScroll:function(e){return $e(e,F,U,M,R)},ref:h},i.createElement(Ve,{responses:T,parentPost:d,responsesLocked:I,isLockedResponse:O,isLoadingInitialContent:S,isFetchingNextSetOfResponses:U,isResponsesSidebarVisible:l,setIsResponsesSidebarVisible:s,inResponseToQuote:c,setInResponseToQuote:u,sidebarRef:h})))))},$e=function(e,t,n,r,o){e.preventDefault();var i=e.currentTarget;i.scrollHeight-i.scrollTop-i.clientHeight<1.5*i.clientHeight&&t&&!n&&(r(!0),o())},qe=function(e){var t=e.children,n=e.post,r=Boolean((0,C.P5)("enable_lite_threaded_responses")),l=(0,a.v9)((function(e){return e.navigation.responsesOpen})),c=i.useState(!1),u=o()(c,2),d=u[0],p=u[1],m=i.useState(void 0),g=o()(m,2),f=g[0],h=g[1],E=i.useState(!1),v=o()(E,2),b=v[0],y=v[1];return i.useEffect((function(){y(!0),p(Boolean(l))}),[l]),i.createElement(s.f.Provider,{value:{openSidebarToRespondToHighlight:function(e){h(e),p(!0)}}},b&&(r?i.createElement(Ze,{isResponsesSidebarVisible:d,setIsResponsesSidebarVisible:p,parentPost:n,inResponseToQuote:f,setInResponseToQuote:h}):i.createElement(we,{isResponsesSidebarVisible:d,setIsResponsesSidebarVisible:p,parentPost:n,inResponseToQuote:f,setInResponseToQuote:h})),t({show:function(){return p(!0)}}))}},37258:(e,t,n)=>{"use strict";n.d(t,{o:()=>y});var r=n(63038),o=n.n(r),i=n(28655),a=n.n(i),s=n(71439),l=n(80439),c=n(67294),u=n(12291),d=n(85740),p=n(57168),m=n(90738),g=n(14414),f=n(62630),h=n(27572),E=n(11348);function v(){var e=a()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return v=function(){return e},e}var b=(0,s.Ps)(v()),y=function(e){var t=e.actionUrl,n=e.children,r=e.onSuccess,i=e.token,a=e.userId,s=(0,f.Av)(),v=!!(0,d.P5)("skip_sign_in_recaptcha"),y=c.useState(!1),x=o()(y,2),S=x[0],P=x[1],w=(0,u.v9)((function(e){return e.navigation.currentLocation})),R=function(){P(!1)},I=(0,h.pK)(),O=(0,h.hp)(),T=t&&i?(0,g.hQ)(w,I,O,t,i):(0,g.hQ)(w,I,O),k=(0,p.r)(),D=k.loading,A=k.error,C=k.viewerId;return D||A?null:c.createElement(l.mm,{mutation:b,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":s.event("site.loginLinkSent",{}),r&&r();break;case"FailedChallenge":s.event("site.loginByEmailCaptchaFailure",{}),P(!1);break;case"BadRequest":case"NotFound":default:R()}},onError:R},(function(e){var t=function(t){(0,E.Zs)(!0,C,a,"Email",!1);var n="medium";s.event("susi.methodClicked",{entryPoint:O,operation:"login",susiMethod:n.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:n.toLowerCase(),alternateUserSuggestionTargetUserId:a,alternateUserSuggestionSourceUserId:C}),e({variables:{userId:a,redirect:T,captchaValue:t}})};return c.createElement(c.Fragment,null,!v&&c.createElement(m.k,{callback:t,shouldExecuteRecaptcha:S}),n({handleSubmit:function(){return v?t(null):P(!0)}}))}))}},19608:(e,t,n)=>{"use strict";n.d(t,{r:()=>l});var r=n(67294),o=n(90174),i=n(4134),a=n(70146),s=n(37581),l=function(e){var t=e.actionUrl,n=e.token,l=e.userSocialLogins,c={actionUrl:t||"",operation:"login",token:n||"",targetUserId:l.userId,alternateUserSuggestion:!0};return r.createElement(s.$,{eventData:{operation:c.operation}},l.google?r.createElement(i.x,c):l.facebook?r.createElement(o.q,c):l.twitter?r.createElement(a.G,c):r.createElement(r.Fragment,null))}},27168:(e,t,n)=>{"use strict";n.d(t,{G:()=>m});var r=n(59713),o=n.n(r),i=n(46829),a=n(67294),s=n(12291),l=n(24087),c=n(203),u=n(27572),d=n(85277);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=function(e){var t=e.declineSuggestedAccount,n=e.isSocial,r=(0,s.v9)((function(e){return{hasRenderedAlternateUserBanner:e.navigation.hasRenderedAlternateUserBanner}}),s.wU).hasRenderedAlternateUserBanner,m=(0,u.hp)(),g=(0,s.I0)(),f=(0,i.useQuery)(l.e),h=f.loading,E=f.error,v=f.data,b=(v=void 0===v?{viewer:void 0}:v).viewer;if(h||E)return a.createElement(a.Fragment,null);var y=function(e){return e?a.createElement(c.rU,{onClick:function(){return x("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):a.createElement(a.Fragment,null,"Not you?"," ",a.createElement(c.rU,{onClick:function(){return x("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",a.createElement(c.rU,{onClick:function(){return x("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},x=function(e){var n="SIGNIN_OPTIONS"===e?"login":"register";t(),g((0,d.Pc)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:n,step:e},!!m&&{susiEntry:m})))};return r?y(b):b?a.createElement(c.rU,{onClick:function(){return t()}},"Not me"):y(n)}},48881:(e,t,n)=>{"use strict";n.d(t,{o:()=>S});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),s=n(63038),l=n.n(s),c=n(71439),u=n(80439),d=n(67294),p=n(12291),m=n(57168),g=n(9785),f=n(62630),h=n(27572),E=n(51512),v=n(33572);function b(){var e=o()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return b=function(){return e},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.children,n=e.postRenderCallback,r=(0,f.Av)(),o=(0,h.hp)(),i=(0,p.v9)((function(e){return e.navigation.referrerSource})),a=(0,E.P7)(i||""),s=a.userId,c=a.name,b=d.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),y=l()(b,2),S=y[0],w=y[1];d.useEffect((function(){var e=S.shouldRun,t=S.showSuggestedAccount,r=S.userSocialLogins;e&&n(R,t,r)}),[S.shouldRun]);var R=(0,g.YC)().value,I=(0,m.r)(),O=I.loading,T=I.error,k=I.viewerId;if(O||T)return null;var D=!("email"!==c||R&&R.mediumMemberAt||!s);return D&&s?d.createElement(u.AE,{query:P,variables:{userId:s}},(function(e){var i=e.loading,a=e.error,s=e.data,l=(s=void 0===s?{}:s).userSocialLogins,c=!(i||a||!l||R&&!l.isMember||!l.facebook&&!l.google&&!l.twitter&&!l.redactedEmailAddress),u=x({loading:i,showSuggestedAccount:c},c&&{userSocialLogins:l,declineSuggestedAccount:function(){var e=(0,v.S)(l);r.event("susi.suggestNotYou",{entryPoint:o,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==l?void 0:l.userId,alternateUserSuggestionSourceUserId:k})}});return!n||i||S.shouldRun||w({shouldRun:!0,showSuggestedAccount:c,userSocialLogins:l}),t(u)})):(n&&!S.shouldRun&&w(x(x({},S),{},{shouldRun:!0})),t({showSuggestedAccount:D,loading:!1}))},P=(0,c.Ps)(b())},10886:(e,t,n)=>{"use strict";n.d(t,{Q:()=>O});var r=n(63038),o=n.n(r),i=n(67294),a=n(12291),s=n(51562),l=n(57168),c=n(9785),u=n(324),d=n(37258),p=n(19608),m=n(27168),g=n(48881),f=n(59317),h=n(4709),E=n(98281),v=n(203),b=n(64504),y=n(62630),x=n(27572),S=n(33572),P=n(81591),w=n(69332),R="alternate_user_top_banner",I=function(e){var t=e.userSocialLogins,n=(0,f.j)().openModal;return t.facebook||t.google||t.twitter?i.createElement(p.r,{userSocialLogins:t}):i.createElement(d.o,{onSuccess:function(){return n({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:R})},userId:t.userId},(function(e){var t=e.handleSubmit;return i.createElement(v.zx,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")}))},O=function(){var e=(0,c.YC)().value,t=(0,l.r)().viewerId,n=(0,a.I0)(),r=(0,y.Av)(),d=i.useState(!1),p=o()(d,2),f=p[0],O=p[1],T=i.useState("loading"),k=o()(T,2),D=k[0],A=k[1];return i.useEffect((function(){n((0,w.e6)(!0)),O(!0)}),[]),i.useEffect((function(){"rendered"===D&&n((0,P.T)(!0)),"not_eligible"===D&&n((0,w.e6)(!1))}),[D]),i.createElement(x.cW,{source:{susiEntry:R}},i.createElement(g.o,{postRenderCallback:function(e,n,o){A(n?"rendered":"not_eligible"),n&&(r.event("experiment.eligible",{experimentId:"358323e239a2"}),r.event("alternateUserBanner.viewed",{alternateUserSuggestionAccountType:(0,S.S)(o),alternateUserSuggestionTargetUserId:o.userId,alternateUserSuggestionSourceUserId:t}))}},(function(n){var o,a=n.showSuggestedAccount,l=n.declineSuggestedAccount,c=n.userSocialLogins;return f&&a&&l&&c?i.createElement(u.N8,null,i.createElement(h.Y,{onClose:function(){return r.event("alternateUserBanner.dismissed",{alternateUserSuggestionAccountType:(0,S.S)(c),alternateUserSuggestionTargetUserId:c.userId,alternateUserSuggestionSourceUserId:t})}},i.createElement(v.xu,{alignItems:"flex-start",display:"flex",flexDirection:"column",sm:{alignItems:"center"}},i.createElement(v.xu,{alignItems:"center",display:"flex",marginBottom:"21px",sm:{flexDirection:"column",margin:"0 21px 21px",textAlign:"center"}},!e&&(null===(o=c.userAvatar)||void 0===o?void 0:o.imageId)&&i.createElement(v.xu,{display:"flex",marginRight:"20px",sm:{marginBottom:"18px",marginRight:"0"}},i.createElement(E.ZP,{scale:"S",user:c.userAvatar})),i.createElement(s.W,{featureString:"alternate-user-top-banner",target:"header"},i.createElement(b.F,{color:"DARKER",scale:"M"},function(e,t){var n=t.isMember,r=t.redactedEmailAddress;return i.createElement(i.Fragment,null,e?"Switch":"Sign in"," to your ",n?"member ":"","account (",i.createElement("b",null,r),") for",n?" unlimited access":" your personalized experience",".")}(e,c)))),i.createElement(v.xu,{alignItems:"center",display:"flex",sm:{flexDirection:"column"}},i.createElement(I,{userSocialLogins:c}),i.createElement(v.xu,{margin:"0 12px",sm:{margin:"24px 0 0"}},i.createElement(m.G,{declineSuggestedAccount:l,isSocial:!!(c.facebook||c.google||c.twitter)})))))):i.createElement(i.Fragment,null)})))}},94937:(e,t,n)=>{"use strict";n.d(t,{b:()=>I});var r=n(87757),o=n.n(r),i=n(48926),a=n.n(i),s=n(63038),l=n.n(s),c=n(46829),u=n(67294),d=n(12291),p=n(51562),m=n(24087),g=n(324),f=n(59317),h=n(4709),E=n(98281),v=n(203),b=n(64504),y=n(62630),x=n(27572),S=n(51512),P=n(11348),w=n(6522),R="signin_confirmation_banner",I=function(){var e=(0,y.Av)(),t=(0,f.j)().openModal,n=u.useState(!1),r=l()(n,2),i=r[0],s=r[1],I=u.useState(!1),O=l()(I,2),T=O[0],k=O[1],D=u.useState(!0),A=l()(D,2),C=A[0],L=A[1],j=(0,c.useQuery)(m.e).data,B=(j=void 0===j?{viewer:void 0}:j).viewer,_=(0,d.v9)((function(e){return{referrerSource:e.navigation.referrerSource,xsrf:e.session.xsrf}}),d.wU),N=_.referrerSource,U=_.xsrf,M=(0,S.P7)(N||"").name;return u.useEffect((function(){return s(!0)}),[]),u.useEffect((function(){i&&B&&(e.event("experiment.eligible",{experimentId:"b4152480e71c"}),function(){var e=a()(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.vA)(null==B?void 0:B.id,U);case 2:t=e.sent,L(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),(0,P.oy)(B.id,U))}),[i]),u.useEffect((function(){T&&e.event("signInConfirmationBanner.viewed",{})}),[T]),!i||!B||!M||"login"!==M||!B.createdAt||Date.now()-B.createdAt<=5*w.uD||C?null:(T||k(!0),u.createElement(x.cW,{source:{susiEntry:R},extendSource:!0},u.createElement(g.N8,null,u.createElement(h.Y,{onClose:function(){return e.event("signInConfirmationBanner.dismissed",{})}},u.createElement(v.xu,{display:"flex",alignItems:"center"},u.createElement(v.xu,{display:"none",marginRight:"20px",sm:{display:"flex"}},u.createElement(E.ZP,{scale:"S",user:B})),u.createElement(b.F,{color:"DARKER",scale:"M"},u.createElement(p.W,{featureString:"confirm-sign-in-banner",target:"header",tag:"span"},"Welcome back. You are signed"," ",B.mediumMemberAt?"into your member account ":"in as ",u.createElement("b",null,B.email),"."," "),u.createElement(v.rU,{onClick:function(){e.event("signInConfirmationBanner.notYouClicked",{}),t({operation:"login",step:"SIGNIN_OPTIONS",susiEntry:R})},linkStyle:"OBVIOUS"},"Not you?")))))))}},4709:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(67294),o=n(28859),i=n(203),a=function(e){var t=e.children,n=e.onClose,a=r.useRef(null),s=r.useContext(o.u6).updateWatchedBounds;return r.createElement(i.Bn,{initialVisibility:!0},(function(e){var o=e.isVisible,l=e.hide;return o&&r.createElement(i.xu,{backgroundColor:"BASE_LIGHT",borderBottom:"BASE_LIGHTER",borderTop:"BASE_LIGHTER"},r.createElement(i.Pm,null,r.createElement(i.xu,{display:"flex",justifyContent:"space-between",paddingBottom:"20px",paddingTop:"20px"},t,r.createElement(i.PZ,{onClick:function(){n&&n(),s("byline",a,{type:"header"}),l()},isPositionAbsolute:!1,size:"REGULAR"}))))}))}},33572:(e,t,n)=>{"use strict";function r(e){if((e.match(/ /g)||[]).length>1)return"";var t=e.indexOf(" ");return e.substring(0,t)}function o(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}n.d(t,{J:()=>r,S:()=>o})}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3414.67906280.chunk.js.map