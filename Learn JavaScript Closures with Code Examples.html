<!DOCTYPE html>
<!-- saved from url=(0078)https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Learn JavaScript Closures with Code Examples</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="./Learn JavaScript Closures with Code Examples_files/prism.min.css">
    <link rel="stylesheet" type="text/css" href="./Learn JavaScript Closures with Code Examples_files/prism-unescaped-markup.css">

    <link href="./Learn JavaScript Closures with Code Examples_files/css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./Learn JavaScript Closures with Code Examples_files/screen.css">
    <link rel="stylesheet" type="text/css" href="./Learn JavaScript Closures with Code Examples_files/algolia-search.css">

    <script type="text/javascript" async="" src="./Learn JavaScript Closures with Code Examples_files/analytics.js.download"></script><script async="" src="./Learn JavaScript Closures with Code Examples_files/gtm.js.download"></script><script src="./Learn JavaScript Closures with Code Examples_files/algoliasearch.min.js.download"></script><style></style>
    <script src="./Learn JavaScript Closures with Code Examples_files/autocomplete.min.js.download"></script>


    <script src="./Learn JavaScript Closures with Code Examples_files/dayjs.min.js.download"></script>
    <script src="./Learn JavaScript Closures with Code Examples_files/localizedFormat.min.js.download"></script>
    <script src="./Learn JavaScript Closures with Code Examples_files/relativeTime.min.js.download"></script>

    <script src="./Learn JavaScript Closures with Code Examples_files/zh-cn.min.js.download"></script>


    <link rel="icon" href="https://www.freecodecamp.org/news/favicon.png" type="image/png">
    <link rel="canonical" href="https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/amp/">
    
    <meta property="og:site_name" content="freeCodeCamp.org">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Learn JavaScript Closures with Code Examples">
    <meta property="og:description" content="Closures are a fundamental JavaScript concept that every serious programmer should know inside and out. The Internet is packed with great explanations of “what” closures are, but few deep-dive into the “why” side of things. I find that understanding the internals ultimately gives developers a stronger grasp of their tools,">
    <meta property="og:url" content="https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/">
    <meta property="og:image" content="https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg">
    <meta property="article:published_time" content="2016-04-29T15:30:09.000Z">
    <meta property="article:modified_time" content="2020-05-22T18:13:38.000Z">
    <meta property="article:tag" content="JavaScript">
    <meta property="article:tag" content="ES6">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Learning To Code">
    <meta property="article:tag" content="Learning">
    
    <meta property="article:publisher" content="https://www.facebook.com/freecodecamp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Learn JavaScript Closures with Code Examples">
    <meta name="twitter:description" content="Closures are a fundamental JavaScript concept that every serious programmer should know inside and out. The Internet is packed with great explanations of “what” closures are, but few deep-dive into the “why” side of things. I find that understanding the internals ultimately gives developers a stronger grasp of their tools,">
    <meta name="twitter:url" content="https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/">
    <meta name="twitter:image" content="https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Preethi Kasireddy">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="JavaScript, ES6, Programming, Learning To Code, Learning">
    <meta name="twitter:site" content="@freecodecamp">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="533">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "freeCodeCamp.org",
        "url": "https://www.freecodecamp.org/news/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.freecodecamp.org/news/content/images/2019/11/fcc_primary_large_24X210.svg",
            "width": 210,
            "height": 24
        }
    },
    "author": {
        "@type": "Person",
        "name": "Preethi Kasireddy",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/6286256e2fd3a464806d6a41a23c02c5?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://www.freecodecamp.org/news/author/preethi/",
        "sameAs": []
    },
    "headline": "Learn JavaScript Closures with Code Examples",
    "url": "https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/",
    "datePublished": "2016-04-29T15:30:09.000Z",
    "dateModified": "2020-05-22T18:13:38.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg",
        "width": 800,
        "height": 533
    },
    "keywords": "JavaScript, ES6, Programming, Learning To Code, Learning",
    "description": "Closures are a fundamental JavaScript concept that every serious programmer\nshould know inside and out.\n\nThe Internet is packed with great explanations of “what” closures are, but few\ndeep-dive into the “why” side of things.\n\nI find that understanding the internals ultimately gives developers a stronger\ngrasp of their tools, so this post will be dedicated to the nuts and bolts of \nhow and why closures work the way they do.\n\nHopefully you’ll walk away better equipped to take advantage of closures",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.freecodecamp.org/news/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.39">
    <link rel="alternate" type="application/rss+xml" title="freeCodeCamp.org" href="https://www.freecodecamp.org/news/rss/">
    <!-- This is related to https://webmonetization.org/ -->
<meta name="monetization" content="$ilp.uphold.com/LJmbPn7WD4JB">
<!-- GAP -->


<!-- Google Tag Manager -->
<script>
  // Set up dataLayer with data if provided
  window.dataLayer = window.dataLayer || [{ gaPropertyId: 'UA-55446531-20' }];

  // Initialized GTM via gtag
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-55446531-20');

  // Configure and initialize GTM
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl+'&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer', 'GTM-5D6RKKP');
</script>
<!-- End Google Tag Manager -->


<meta name="google-site-verification" content="b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E">

<script async="" src="./Learn JavaScript Closures with Code Examples_files/adblocker-chromeglobalinjectjs.js.download"></script><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></head>

<body class="post-template tag-javascript tag-es6 tag-programming tag-learning-to-code tag-learning" data-new-gr-c-s-check-loaded="14.997.0" data-gr-ext-installed="">

    <div class="site-wrapper">
        <nav class="site-nav nav-padding">
    <div class="site-nav-left">
        <form id="search-form" onsubmit="submitSearch()">
  <div role="search" class="searchbox__wrapper">
    <input type="search" placeholder="Search 6,000+ tutorials" id="search-input" class="aa-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style=""><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Lato, sans-serif; font-size: 18px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre>
    <button type="submit" title="Submit your search query." class="ais-SearchBox-submit">
      <svg class="ais-SearchBox-submitIcon" xmlns="https://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 40 40">
        <path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path>
      </svg>
    </button>
    <div id="dropdown-container"><span class="algolia-autocomplete" style="position: absolute; z-index: 100; display: none; direction: ltr;"><span class="aa-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="display: block; left: 0px; right: auto;"><div class="aa-dataset-1"></div></span></span></div>
  </div>
</form>

<script>
  const client = algoliasearch('QMJYL5WYTI', '4318af87aa3ce128708f1153556c6108');
  const index = client.initIndex("news");
  const screenWidth = window.screen.width;
  const screenHeight = window.screen.height;
  const hitsToRender = (screenWidth >= 767 && screenHeight >= 768) ? 8 : 5;
  const searchForm = document.getElementById('search-form');
  const input = document.getElementById('search-input');
  const dropdownContainer = document.getElementById('dropdown-container');
  let searchQuery, hitSelected, hits;

  input.addEventListener('input', e => {
    searchQuery = e.target.value;
  });

  // Prevent form from being submitted with magnifying
  // glass or enter when there is no query or hits
  searchForm.addEventListener('submit', e => {
    e.preventDefault();
  });

  const search = autocomplete('#search-input', { 
      hint: false,
      keyboardShortcuts: ['s', 191],
      openOnFocus: true,
      appendTo: dropdownContainer,
      debug: true // allow tabbing through results
    }, [
    {
      source: autocomplete.sources.hits(index, { hitsPerPage: hitsToRender }),
      debounce: 250,
      templates: {
        suggestion: (suggestion, result) => {
          hits = true;
          return `
            <a href="${suggestion.url}">
              <div class="algolia-result">
                <span>${suggestion._highlightResult.title.value}</span>
              </div>
            </a>
          `;
        },
        empty: (options) => {
          hits = false;
          return `
            <div class="aa-suggestion footer-suggestion no-hits-footer">
              <div class="algolia-result">
                <span>
                  No tutorials found
                </span>
              </div>
            </div>
          `;
        },
        footer: (query, result) => {
          if (!query.isEmpty) {
            return `
              <div class="aa-suggestion footer-suggestion">
                <a id="algolia-footer-selector" href="https://www.freecodecamp.org/news/search?query=${searchQuery}">
                  <div class="algolia-result algolia-footer">
                    <span>See all results for ${searchQuery}</span>
                  </div>
                </a>
              </div>
            `;
          }
        }
      }
    }
  ]).on('autocomplete:selected', (event, suggestion, dataset, context) => {
    // If article is selected, set to URL of the article. 
    // If footer is selected, set to search results path
    hitSelected = suggestion ? suggestion.url : `https://www.freecodecamp.org/news/search?query=${searchQuery}`;

    // Let browser handle click, and do not go to selection on tab key press
    if (context.selectionMethod === 'click' || context.selectionMethod === 'tabKey') {
      return;
    }

    // Go to selected article or footer path
    if (hits) {
      window.location.assign(hitSelected);
    }
  });

  // Go to highlighted hit or search for current query
  // when magnifying glass or enter is pressed
  function submitSearch() {
    hitSelected = document.getElementsByClassName('aa-cursor')[0];

    if (hitSelected && searchQuery) {
      const articleUrl = hitSelected.querySelector('a').href;
      window.location.assign(articleUrl);
    } else if (!hitSelected && searchQuery && hits) {
      window.location.assign(`https://www.freecodecamp.org/news/search?query=${searchQuery}`);
    }
  }

  // close dropbar when clicking off 
  document.addEventListener('click', e => {
    if (e.target !== input) {
      search.autocomplete.close();
    }
  });
</script>
    </div>
    <div class="site-nav-middle">
        <a class="site-nav-logo" href="https://www.freecodecamp.org/news"><img src="./Learn JavaScript Closures with Code Examples_files/fcc_primary_large_24X210.svg" alt="freeCodeCamp.org"></a>
    </div>
    <div class="site-nav-right">
        <div class="nav-group">
            <a class="nav-forum" href="https://forum.freecodecamp.org/">Forum</a>

            <a class="toggle-button-nav" href="https://www.freecodecamp.org/donate/">
                Donate
            </a>
        </div>

    </div>
</nav>
        <a class="donation-banner" id="donation-banner-link" href="https://www.freecodecamp.org/">
    <p>
        Learn to code — <span>free 3,000-hour curriculum</span>
    </p>
</a>

        <div id="error-message"></div>

        




<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-javascript tag-es6 tag-programming tag-learning-to-code tag-learning ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="April 29, 2016">April 29, 2016</time>
                    <span class="date-divider">/</span>
                    <a href="https://www.freecodecamp.org/news/tag/javascript/">
                        #JavaScript
                    </a>
                </section>
                <h1 class="post-full-title">Learn JavaScript Closures with Code Examples</h1>
            </header>

            <div class="post-full-author-header">


                
<section class="author-card">
    <img class="author-profile-image" src="./Learn JavaScript Closures with Code Examples_files/6286256e2fd3a464806d6a41a23c02c5.jpeg" alt="Preethi Kasireddy">
    <section class="author-card-content author-card-content-no-bio">
        <h4 class="author-card-name"><a href="https://www.freecodecamp.org/news/author/preethi/">Preethi Kasireddy</a></h4>
    </section>
</section>


            </div>

            <figure class="post-full-image">
                <img srcset="https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg 300w,
                            https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg 600w,
                            https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg 1000w,
                            https://cdn-media-1.freecodecamp.org/images/1*bSMhqCAGeHAqbPS6qQMe5Q.jpeg 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="./Learn JavaScript Closures with Code Examples_files/1_bSMhqCAGeHAqbPS6qQMe5Q.jpeg" alt="Learn JavaScript Closures with Code Examples" onerror="this.style.display=&#39;none&#39;">
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>Closures are a fundamental JavaScript concept that every serious programmer should know inside and out.</p><p>The Internet is packed with great explanations of “what” closures are, but few deep-dive into the “why” side of things.</p><p>I find that understanding the internals ultimately gives developers a stronger grasp of their tools, so this post will be dedicated to the nuts and bolts of <em><em>how</em></em> and <em><em>why</em></em> closures work the way they do.</p><p>Hopefully you’ll walk away better equipped to take advantage of closures in your day-to-day work. Let’s get started!</p><h1 id="what-is-a-closure"><strong>What is a closure?</strong></h1><p>Closures are an extremely powerful property of JavaScript (and most programming languages). As defined on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" rel="noopener nofollow">MDN</a>:</p><p><em><em>Closures are <strong><strong>functions</strong></strong> that <strong><strong>refer to</strong></strong> independent <strong><strong>(free) variables</strong></strong>. In other words, the function defined in the closure <strong><strong>‘remembers’ the environment in which it was created</strong></strong>.</em></em></p><p>Note: Free variables are variables that are neither locally declared nor passed as parameter.</p><p>Let’s look at some examples:</p><h2 id="example-1-"><strong>Example 1:</strong></h2><pre class=" language-js"><code class=" language-js"><span class="token keyword">function</span> <span class="token function">numberGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Local “free” variable that ends up within the closure</span>
  <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">checkNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  num<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> checkNumber<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token function">numberGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span></code></pre><p>In the example above, the function numberGenerator creates a local “free” variable <strong><strong>num </strong></strong>(a number) and <strong><strong>checkNumber </strong></strong>(a function which prints <strong><strong>num</strong></strong> to the console). </p><p>The function <strong><strong>checkNumber</strong></strong> doesn’t have any local variables of its own — however, it does have access to the variables within the outer function, <strong><strong>numberGenerator,</strong></strong> because of a closure. </p><p>Therefore, it can use the variable <strong><strong>num</strong></strong> declared in <strong><strong>numberGenerator</strong></strong> to successfully log it to the console <em><em>even after</em></em> <strong><strong>numberGenerator</strong></strong> has returned.</p><h2 id="example-2-"><strong>Example 2:</strong></h2><p>In this example we’ll demonstrate that a closure contains any and all local variables that were declared inside the outer enclosing function.</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// Local variable that ends up within the closure </span>
  <span class="token keyword">var</span> hello <span class="token operator">=</span> <span class="token string">'Hello, world!'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> say<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> sayHelloClosure <span class="token operator">=</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">sayHelloClosure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‘Hello, world!’</span></code></pre><p>Notice how the variable <strong><strong>hello</strong></strong> is defined <em><em>after</em></em> the anonymous function — but can still access the <strong><strong>hello</strong></strong> variable. This is because the <strong><strong>hello</strong></strong> variable has already been defined in the function “scope” at the time of creation, making it available when the anonymous function is finally executed. </p><p>(Don’t worry, I’ll explain what “scope” means later in the post. For now, just roll with it!)</p><h2 id="understanding-the-high-level"><strong>Understanding the High Level</strong></h2><p>These examples illustrated “what” closures are on a high level. The general theme is this: <em><em>we have access to variables defined in enclosing function(s) even after the enclosing function which defines these variables has returned</em></em>. </p><p>Clearly, something is happening in the background that allows those variables to still be accessible long after the enclosing function that defined them has returned.</p><p>To understand how this is possible, we’ll need to touch on a few related concepts — starting 3000 feet up and slowly climbing our way back down to the land of closures. Let’s start with the overarching <em><em>context</em></em> within which a function is run, known as <em><em>“Execution context”</em></em>.</p><h1 id="execution-context"><strong>Execution Context</strong></h1><p>Execution context is an abstract concept used by the ECMAScript specification to<em><em> </em></em>track the runtime evaluation of code. This can be the global context in which your code is first executed or when the flow of execution enters a function body.</p><figure class="kg-card kg-image-card"><img src="./Learn JavaScript Closures with Code Examples_files/image-147.png" class="kg-image" alt=""></figure><p>At any point in time, there can only be one execution context running. That’s why JavaScript is “single threaded,” meaning only one command can be processed at a time. </p><p>Typically, browsers maintain this execution context using a “stack.” A stack is a Last In First Out (LIFO) data structure, meaning the last thing that you pushed onto the stack is the first thing that gets popped off it. (This is because we can only insert or delete elements at the top of the stack.) </p><p>The current or “running” execution context is always the top item in the stack. It gets popped off the top when the code in the running execution context has been completely evaluated, allowing the next top item to take over as running execution context.</p><p>Moreover, just because an execution context is running doesn’t mean that it has to finish running before a different execution context can run. </p><p>There are times when the running execution context is suspended and a different execution context becomes the running execution context. The suspended execution context might then at a later point pick back up where it left off. </p><p>Any time one execution context is replaced by another like this, a new execution context is created and pushed onto the stack, becoming the current execution context.</p><figure class="kg-card kg-image-card"><img src="./Learn JavaScript Closures with Code Examples_files/image-148.png" class="kg-image" alt=""></figure><p>For a practical example of this concept in action in the browser, see the example below:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">boop</span><span class="token punctuation">(</span>x <span class="token operator">+</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">boop</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> e <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> bar<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> moar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Closure  </span>
<span class="token comment">/* 
  The function below executes the function bar which was returned 
  when we executed the function foo in the line above. The function bar 
  invokes boop, at which point bar gets suspended and boop gets push 
  onto the top of the call stack (see the screenshot below)
*/</span>
<span class="token function">moar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><figure class="kg-card kg-image-card"><img src="./Learn JavaScript Closures with Code Examples_files/image-149.png" class="kg-image" alt=""></figure><p>Then when <strong><strong>boop</strong></strong> returns, it gets popped off the stack and <strong><strong>bar</strong></strong> is resumed:</p><figure class="kg-card kg-image-card"><img src="./Learn JavaScript Closures with Code Examples_files/image-150.png" class="kg-image" alt=""></figure><p>When we have a bunch of execution contexts running one after another — often being paused in the middle and then later resumed — we need some way to keep track of state so we can manage the order and execution of these contexts. </p><p>And that is in fact the case. As per the ECMAScript spec, each execution context has various state components that are used to keep track of the progress the code in each context has made. These include:</p><ul><li><strong><strong>Code evaluation state:</strong></strong> Any state needed to perform, suspend, and resume evaluation of the code associated with this execution context</li><li><strong><strong>Function:</strong></strong> The function object which the execution context is evaluating (or null if the context being evaluated is a <em><em>script</em></em> or <em><em>module</em></em>)</li><li><strong><strong>Realm:</strong></strong> A set of internal objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources</li><li><strong><strong>Lexical Environment:</strong></strong> Used to resolve identifier references made by code within this execution context.</li><li><strong><strong>Variable Environment:</strong></strong> Lexical Environment whose EnvironmentRecord holds bindings created by VariableStatements within this execution context.</li></ul><p>If this sounds too confusing to you, don’t worry. Of all these variables, the Lexical Environment variable is the one that’s most interesting to us because it explicitly states that it resolves <em><em>“identifier references” </em></em>made by code within this execution context. </p><p>You can think of “identifiers” as variables. Since our original goal was to figure out how it’s possible for us to magically access variables even after a function (or “context”) has returned, Lexical Environment looks like something we should dig into!</p><p><strong><strong><em><em>Note</em></em></strong></strong><em><em>: Technically, both Variable Environment and Lexical Environment are used to implement closures. But for simplicity’s sake, we’ll generalize it to an “Environment”. For a detailed explanation on the difference between Lexical and Variable Environment, see Dr. Alex Rauschmayer’s excellent </em></em><a href="http://www.2ality.com/2011/04/ecmascript-5-spec-lexicalenvironment.html" rel="noopener nofollow"><em><em>article</em></em></a><em><em>.</em></em></p><h1 id="lexical-environment"><strong>Lexical Environment</strong></h1><p>By definition: </p><blockquote><em><em>A Lexical Environment is a specification type used to define the association of Identifiers to specific variables and functions based upon the lexical nesting structure of ECMAScript code. A Lexical Environment consists of an Environment Record and a possibly null reference to an outer Lexical Environment. Usually a Lexical Environment is associated with some specific syntactic structure of ECMAScript code such as a FunctionDeclaration, a BlockStatement, or a Catch clause of a TryStatement and a new Lexical Environment is created each time such code is evaluated. — </em></em><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-lexical-environments" rel="noopener nofollow"><em><em>ECMAScript-262/6.0</em></em></a></blockquote><p>Let’s break this down.</p><ul><li><strong><strong>“Used to define the association of Identifiers”:</strong></strong><em><em> </em></em>The purpose of a Lexical Environment is to manage data (i.e. identifiers) within code. In other words, it gives meaning to identifiers. For instance, if we had a line of code “<em><em>console.log(x / 10)”, </em></em>it’s meaningless to have a variable (or “identifier”) <strong><strong>x</strong></strong> without something that provides meaning for that variable. The Lexical Environments provides this meaning (or “association”) via its Environment Record (see below).</li><li><strong><strong>“Lexical Environment consists of an Environment Record”:</strong></strong> An Environment Record is a fancy way to say that it keeps a record of all identifiers and their bindings that exist within a Lexical Environment. Every Lexical Environment has it’s own Environment Record.</li><li><strong><strong>“Lexical nesting structure”:</strong></strong><em><em> </em></em>This is the interesting part, which is basically saying that an inner environment references the outer environment that surrounds it, and that this outer environment can have its own outer environment as well. As a result, an environment can serve as the outer environment for more than one inner environment. The global environment is the only Lexical environment that does not have an outer environment. The language here is tricky, so let’s use a metaphor and think of lexical environments like layers of an onion: the global environment is the outermost layer of the onion; every subsequent layer below is nested within.</li></ul><figure class="kg-card kg-image-card"><img src="./Learn JavaScript Closures with Code Examples_files/image-151.png" class="kg-image" alt=""></figure><p>Abstractly, the environment looks like this in pseudocode:</p><pre class=" language-js"><code class=" language-js">LexicalEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// Identifier bindings go here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token comment">// Reference to the outer environment</span>
  outer<span class="token punctuation">:</span> <span class="token operator">&lt;</span> <span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><ul><li><strong><strong>“A new Lexical Environment is created each time such code is evaluated”:</strong></strong> Each time an enclosing outer function is called, a new lexical environment is created. This is important — we’ll come back to this point again at the end. <em><em>(Side note: a function is not the only way to create a Lexical Environment. Others include a block statement or a catch clause. For simplicity’s sake, I’ll focus on environment created by functions throughout this post)</em></em></li></ul><p>In short, every execution context has a Lexical Environment. This Lexical environments holds variables and their associated values, and also has a reference to its outer environment. </p><p>The Lexical Environment can be the global environment, a module environment (which contains the bindings for the top level declarations of a Module), or a function environment (environment created due to the invocation of a function).</p><h1 id="scope-chain"><strong>Scope Chain</strong></h1><p>Based on the above definition, we know that an environment has access to its parent’s environment, and its parent environment has access to its parent environment, and so on. This set of identifiers that each environment has access to is called <em><em>“scope.”</em></em> We can nest scopes into a hierarchical chain of environments known as the<em><em> “scope chain”</em></em>.</p><p>Let’s look at an example of this nesting structure:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// free variable</span>
  <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span> <span class="token comment">// free variable</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> bar<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>As you can see, <strong><strong>bar</strong></strong> is nested within <strong><strong>foo</strong></strong>. To help you visualize the nesting, see the diagram below:</p><figure class="kg-card kg-image-card"><img src="./Learn JavaScript Closures with Code Examples_files/image-152.png" class="kg-image" alt=""></figure><p>We’ll revisit this example later in the post.</p><p>This scope chain, or chain of environments associated with a function, is saved to the function object at the time of its creation. In other words, it’s defined statically by location within the source code. (This is also known as “lexical scoping”.)</p><p>Let’s take a quick detour to understand the difference between “dynamic scope” and “static scope”, which will help clarify why static scope (or lexical scope) is necessary in order to have closures.</p><h1 id="detour-dynamic-scope-vs-static-scope"><strong>Detour: Dynamic Scope vs. Static Scope</strong></h1><p>Dynamic scoped languages have “stack-based implementations”, meaning that the local variables and arguments of functions are stored on a stack. Therefore, the runtime state of the program stack determines what variable you are referring to.</p><p>On the other hand, static scope is when the variables referenced in a context are recorded at the <em><em>time of creation</em></em>. In other words, the structure of the program source code determines what variables you are referring to.</p><p>At this point, you might be wondering how dynamic scope and static scope are different. Here’s two examples to help illustrate:</p><h2 id="example-1--1"><strong>Example 1:</strong></h2><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Static scope: 15; Dynamic scope: 15</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Static scope: 15; Dynamic scope: 7</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>We see above that the static scope and dynamic scope return different values when the function bar is invoked.</p><p>With static scope, the return value of <strong><strong>bar</strong></strong> is based on the value of <strong><strong>x</strong></strong> at the time of <strong><strong>foo</strong></strong>’s creation. This is because of the static and lexical structure of the source code, which results in <strong><strong>x</strong></strong> being 10 and the result being 15.</p><p>Dynamic scope, on the other hand, gives us a stack of variable definitions tracked at runtime — such that which <strong><strong>x</strong></strong> we use depends on what exactly is in scope and has been defined dynamically at runtime. Running the function <strong><strong>bar</strong></strong> pushes x = 2 onto the top of the stack, making <strong><strong>foo</strong></strong> return 7.</p><h2 id="example-2--1"><strong>Example 2:</strong></h2><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> myVar <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
 
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myVar<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Static scope: 100; Dynamic scope: 100</span>
 
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> myVar <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Static scope: 100; Dynamic scope: 50</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Higher-order function</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> myVar <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
  <span class="token function">arg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Static scope: 100; Dynamic scope: 1500</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Similarly, in the dynamic scope example above the variable <strong><strong>myVar</strong></strong> is resolved using the value of <strong><strong>myVar</strong></strong> at the place where the function is called. Static scope, on the other hand, resolves <strong><strong>myVar</strong></strong> to the variable that was saved in the scope of the two IIFE functions <em><em>at creation</em></em>.</p><p>As you can see, dynamic scope often leads to some ambiguity. It’s not exactly made clear which scope the free variable will be resolved from.</p><h1 id="closures"><strong>Closures</strong></h1><p>Some of that may strike you as off-topic, but we’ve actually covered everything we need to know to understand closures:</p><p><em><em>Every function has an execution context, which comprises of an environment that gives meaning to the variables within that function and a reference to its parent’s environment. A reference to the parent’s environment makes all variables in the parent scope available for all inner functions, regardless of whether the inner function(s) are invoked outside or inside the scope in which they were created.</em></em></p><p><em><em>So, it appears as if the function “remembers” this environment (or scope) because the function literally has a reference to the environment (and the variables defined in that environment)!</em></em></p><p>Coming back to the nested structure example:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// free variable</span>
  <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span> <span class="token comment">// free variable</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> bar<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 45</span></code></pre><p>Based on our understanding of how environments work, we can say that the environment definitions for the above example look something like this (note, this is purely pseudocode):</p><pre class=" language-js"><code class=" language-js">GlobalEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
    <span class="token comment">// built-in identifiers</span>
    Array<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span><span class="token punctuation">,</span>
    Object<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span><span class="token punctuation">,</span>
    <span class="token comment">// etc..</span>
    
    <span class="token comment">// custom identifiers</span>
    x<span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  outer<span class="token punctuation">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
fooEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    y<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    bar<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span>
  <span class="token punctuation">}</span>
  outer<span class="token punctuation">:</span> GlobalEnvironment
<span class="token punctuation">}</span><span class="token punctuation">;</span>

barEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    z<span class="token punctuation">:</span> <span class="token number">15</span>
  <span class="token punctuation">}</span>
  outer<span class="token punctuation">:</span> fooEnvironment
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>When we invoke the function <strong><strong>test</strong></strong>, we get 45, which is the return value from invoking the function <strong><strong>bar</strong></strong> (because <strong><strong>foo</strong></strong> returned <strong><strong>bar</strong></strong>). <strong><strong>bar</strong></strong> has access to the free variable <strong><strong>y</strong></strong> even after the function <strong><strong>foo</strong></strong> has returned because <strong><strong>bar</strong></strong> has a reference to <strong><strong>y</strong></strong> through its outer environment, which is <strong><strong>foo</strong></strong>’s environment! <strong><strong>bar</strong></strong> also has access to the global variable <strong><strong>x</strong></strong> because <strong><strong>foo</strong></strong>’s environment has access to the global environment. This is called <em><em>“scope-chain lookup.”</em></em></p><p>Returning to our discussion of dynamic scope vs static scope: for closures to be implemented, we can’t use dynamic scoping via a dynamic stack to store our variables. </p><p>The reason is because it would mean that when a function returns, the variables would be popped off the stack and no longer available — which contradicts our initial definition of a closure. </p><p>What happens instead is that the closure data of the parent context is saved in what’s known as the “heap,” which allows for the data to persist after the function call that made them returns (i.e. even after the execution context is popped off the execution call stack).</p><p>Make sense? Good! Now that we understand the internals on an abstract level, let’s look at a couple more examples:</p><h2 id="example-1--2"><strong>Example 1:</strong></h2><p>One canonical example/mistake is when there’s a for-loop and we try to associate the counter variable in the for-loop with some function in the for-loop:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5, expected 0</span>
result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5, expected 1</span>
result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5, expected 2</span>
result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5, expected 3</span>
result<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5, expected 4</span></code></pre><p>Going back to what we just learned, it becomes super easy to spot the mistake here! Abstractly, here’s what the environment looks like this by the time the for-loop exits:</p><pre class=" language-js"><code class=" language-js">environment<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    i<span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  outer<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre><p>The incorrect assumption here was that the scope is different for all five functions within the result array. Instead, what’s actually happening is that the environment (or context/scope) is the same for all five functions within the result array. Therefore, every time the variable <strong><strong>i</strong></strong> is incremented, it updates scope — which is shared by all the functions. That’s why any of the 5 functions trying to access <strong><strong>i</strong></strong> returns 5 (i is equal to 5 when the for-loop exits).</p><p>One way to fix this is to create an additional enclosing context for each function so that they each get their own execution context/scope:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// additional enclosing context</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0, expected 0</span>
result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, expected 1</span>
result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2, expected 2</span>
result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3, expected 3</span>
result<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, expected 4</span></code></pre><p>Yay! That fixed it :)</p><p>Another, rather clever approach is to use <strong><strong>let</strong></strong> instead of <strong><strong>var</strong></strong>, since <strong><strong>let</strong></strong> is block-scoped and so a new identifier binding is created for each iteration in the for-loop:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0, expected 0</span>
result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, expected 1</span>
result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2, expected 2</span>
result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3, expected 3</span>
result<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, expected 4</span></code></pre><p>Tada! :)</p><h2 id="example-2--2"><strong>Example 2:</strong></h2><p>In this example, we’ll show how each <em><em>call</em></em> to a function creates a new separate closure:</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">function</span> <span class="token function">iCantThinkOfAName</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This array variable, along with the 2 parameters passed in, </span>
  <span class="token comment">// are 'captured' by the nested function 'doSomething'</span>
  <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    num <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'num: '</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'array: '</span> <span class="token operator">+</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj.value: '</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> doSomething<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> referenceObject <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">iCantThinkOfAName</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> referenceObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// closure #1</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">iCantThinkOfAName</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> referenceObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// closure #2</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">/*
  num: 4
  array: 1,2,3,4
  obj.value: 10
*/</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">/*
  num: 8
  array: 1,2,3,8
  obj.value: 10
*/</span>

referenceObject<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
  num: 8
  array: 1,2,3,4,8
  obj.value: 11
*/</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">/*
  num: 12
  array: 1,2,3,8,12
  obj.value: 11
*/</span></code></pre><p>In this example, we can see that each call to the function <strong><strong>iCantThinkOfAName</strong></strong> creates a new closure, namely <strong><strong>foo</strong></strong> and <strong><strong>bar</strong></strong>. Subsequent invocations to either closure functions updates the closure variables within that closure itself, demonstrating that the variables in <em><em>each</em></em> closure continue to be usable by <strong><strong>iCantThinkOfAName</strong></strong>’s <strong><strong>doSomething</strong></strong> function long after <strong><strong>iCantThinkOfAName</strong></strong> returns.</p><h2 id="example-3-"><strong>Example 3:</strong></h2><pre class=" language-js"><code class=" language-js"><span class="token keyword">function</span> <span class="token function">mysteriousCalculator</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> mysteriousVariable <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">add</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> mysteriousVariable<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token function">toFixedTwoPlaces</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		
		<span class="token function-variable function">subtract</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> result <span class="token operator">=</span> a <span class="token operator">-</span> b <span class="token operator">-</span> mysteriousVariable<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token function">toFixedTwoPlaces</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toFixedTwoPlaces</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> myCalculator <span class="token operator">=</span> <span class="token function">mysteriousCalculator</span><span class="token punctuation">(</span><span class="token number">10.01</span><span class="token punctuation">,</span> <span class="token number">2.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCalculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 15.02</span>
myCalculator<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 5.00</span></code></pre><p>What we can observe is that <strong><strong>mysteriousCalculator</strong></strong> is in the global scope, and it returns two functions. Abstractly, the environments for the example above look like this:</p><pre class=" language-js"><code class=" language-js">GlobalEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
    <span class="token comment">// built-in identifiers</span>
    Array<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span><span class="token punctuation">,</span>
    Object<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span><span class="token punctuation">,</span>
    <span class="token comment">// etc...</span>

    <span class="token comment">// custom identifiers</span>
    mysteriousCalculator<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span><span class="token punctuation">,</span>
    toFixedTwoPlaces<span class="token punctuation">:</span> <span class="token string">'&lt;func&gt;'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  outer<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
mysteriousCalculatorEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">10.01</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token number">2.01</span><span class="token punctuation">,</span>  
    mysteriousVariable<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  outer<span class="token punctuation">:</span> GlobalEnvironment<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

addEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">:</span> <span class="token number">15.02</span>
  <span class="token punctuation">}</span>
  outer<span class="token punctuation">:</span> mysteriousCalculatorEnvironment<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

subtractEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  EnvironmentRecord<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">:</span> <span class="token number">5.00</span>
  <span class="token punctuation">}</span>
  outer<span class="token punctuation">:</span> mysteriousCalculatorEnvironment<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Because our <strong><strong>add</strong></strong> and <strong><strong>subtract</strong></strong> functions have a reference to the <strong><strong>mysteriousCalculator</strong></strong> function environment, they’re able to make use of the variables in that environment to calculate the result.</p><h2 id="example-4-"><strong>Example 4:</strong></h2><p>One final example to demonstrate an important use of closures: to maintain a private reference to a variable in the outer scope.</p><pre class=" language-js"><code class=" language-js"><span class="token keyword">function</span> <span class="token function">secretPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> password <span class="token operator">=</span> <span class="token string">'xh38sk'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">guessPassword</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">guess</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>guess <span class="token operator">===</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> passwordGame <span class="token operator">=</span> <span class="token function">secretPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
passwordGame<span class="token punctuation">.</span><span class="token function">guessPassword</span><span class="token punctuation">(</span><span class="token string">'heyisthisit?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
passwordGame<span class="token punctuation">.</span><span class="token function">guessPassword</span><span class="token punctuation">(</span><span class="token string">'xh38sk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><p>This is a very powerful technique — it gives the closure function <strong><strong>guessPassword</strong></strong> exclusive access to the <strong><strong>password</strong></strong> variable, while making it impossible to access the <strong><strong>password</strong></strong> from the outside.</p><h1 id="tl-dr"><strong>TL;DR</strong></h1><ul><li>Execution context is an abstract concept used by the ECMAScript specification to<em><em> </em></em>track the runtime evaluation of code. At any point in time, there can only be one execution context that is executing code.</li><li>Every execution context has a Lexical Environment. This Lexical environments holds identifier bindings (i.e. variables and their associated values), and also has a reference to its outer environment.</li><li>The set of identifiers that each environment has access to is called “scope.” We can nest these scopes into a hierarchical chain of environments, known as the “scope chain”.</li><li>Every function has an execution context, which comprises of a Lexical Environment that gives meaning to the variables within that function and a reference to its parent’s environment. And so it appears as if the function “remembers” this environment (or scope) because the function literally has a reference to this environment. This is a closure.</li><li>A closure is created every time an enclosing outer function is called. In other words, the inner function does not need to return for a closure to be created.</li><li>The scope of a closure in JavaScript is lexical, meaning it’s defined statically by its location within the source code.</li><li>Closures have many practical use cases. One important use case is to maintain a private reference to a variable in the outer scope.</li></ul><h1 id="clos-ure-ing-remarks"><strong>Clos(ure)ing remarks</strong></h1><p>I hope this post was helpful and gave you a mental model for how closures are implemented in JavaScript. As you can see, understanding the nuts and bolts of how they work makes it much easier to spot closures — not to mention saving a lot of headache when it’s time to debug.</p><p>PS: I’m human and make mistakes — so if you find any mistakes I’d love for you to let me know!</p><h2 id="further-reading"><strong>Further Reading</strong></h2><p>For the sake of brevity I left out a few topics that might be interesting to some readers. Here are some links that I wanted to share:</p><ul><li><strong><strong>What’s the VariableEnvironment within an execution context?</strong></strong> Dr. Axel Rauschmayer does a phenomenol job explaining it so I’ll leave you off with a link to his blog post: <a href="http://www.2ality.com/2011/04/ecmascript-5-spec-lexicalenvironment.html" rel="noopener nofollow">http://www.2ality.com/2011/04/ecmascript-5-spec-lexicalenvironment.html</a></li><li><strong><strong>What are the different types of Environment Records?</strong></strong> Read the spec here: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-environment-records" rel="noopener nofollow">http://www.ecma-international.org/ecma-262/6.0/#sec-environment-records</a></li><li><strong><strong>Excellent article by MDN on closures:</strong></strong> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" rel="noopener nofollow">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures</a></li><li>Others? Please suggest and I’ll add them!</li></ul>
                </div>
                <hr>

                <div class="post-full-author-header">
                    
<section class="author-card">
    <img class="author-profile-image" src="./Learn JavaScript Closures with Code Examples_files/6286256e2fd3a464806d6a41a23c02c5.jpeg" alt="Preethi Kasireddy">
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="https://www.freecodecamp.org/news/author/preethi/">Preethi Kasireddy</a></h4>
        <p>Read <a href="https://www.freecodecamp.org/news/author/preethi/">more posts</a> by this author.</p>
    </section>
</section>


                </div>
                <hr>

                <p class="social-row">

    If this article was helpful, <a id="tweet-btn" class="cta-button">tweet it.</a>
</p>

                
<div class="learn-cta-row">
    <p>
        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a class="cta-button" href="https://www.freecodecamp.org/learn">Get started</a>
    </p>
</div>                  <script>
    // Conditionally show comments section based on publication language setting
    const showCommentsList = ['zh-cn'];

    if (showCommentsList.includes(`en`)) {
      const hostname = window.location.hostname;
      const discourseEmbedMap = {
        'www.freecodecamp.org': {
          file: 'https://forum.freecodecamp.org/srv/status',
          discourseUrl: 'https://forum.freecodecamp.org/'
        },
        'chinese.freecodecamp.org': {
          file: 'https://chinese.freecodecamp.org/forum/srv/status',
          discourseUrl: 'https://chinese.freecodecamp.org/forum/',
        },
        'dev': {
          file: 'https://forum.freecodecamp.dev/srv/status',
          discourseUrl: 'https://forum.freecodecamp.dev/'
        },
      };
      const discourseEmbedInfo = discourseEmbedMap[hostname] ? discourseEmbedMap[hostname] : discourseEmbedMap['dev'];
      const { file, discourseUrl } = discourseEmbedInfo;

      function loadDiscourseComments() {
        var xhr = new XMLHttpRequest();
        var randomNum = Math.round(Math.random() * 10000);
        xhr.open('HEAD', file + '?rand=' + randomNum, true);
        xhr.send();
        xhr.addEventListener('readystatechange', processRequest, false);
        function processRequest(e) {
          if (xhr.readyState == 4) {
            if (xhr.status >= 200 && xhr.status < 304) {
              document.getElementById('discourse-comments').innerHTML = '';
              DiscourseEmbed = {
                discourseUrl,
                discourseEmbedUrl: 'https://www.freecodecamp.org/news/lets-learn-javascript-closures-66feb44f6a44/'
              };
              var d = document.createElement('script');
              d.type = 'text/javascript';
              d.async = true;
              d.src = discourseUrl + 'javascripts/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
            } else {
              document.getElementById('discourse-comments').innerHTML =
                '<div style="text-align: center;">Sorry, we could not load the comments. Please try again after some time.</div>';
            }
          }
        }
      }

      if (window && window.addEventListener) {
        // Create comments section
        const commentsDivHtml = `
          <div id='discourse-comments'>
            <button id='trigger-load-comments'>Show comments</button>
          </div>
        `;
        const fullContentSection = document.getElementsByClassName('post-full-content')[0];
        fullContentSection.insertAdjacentHTML('beforeend', commentsDivHtml);

        window.addEventListener('load', function () {
          document.getElementById('trigger-load-comments').onclick = loadDiscourseComments;
        });
      }
    }
  </script>
            </section>

        </article>
    </div>
</main>




        <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-top">
            <div class="footer-desc-col">
                <p>
                    freeCodeCamp is a donor-supported tax-exempt 501(c)(3) nonprofit organization (United States Federal Tax Identification Number: 82-0779546)
                </p>
                <p>
                    Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public. We also have thousands of freeCodeCamp study groups around the world.
                </p>
                <p>
                    Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.
                </p>
                <p class="footer-donation">
                    You can <a href="https://freecodecamp.org/donate" class="inline" rel="noopener noreferrer" target="_blank">make a tax-deductible donation here</a>.
                </p>
            </div>
            <div class="trending-guides">
                <div class="col-header">Trending Guides</div>
                <div class="trending-guides-row">
                    <div class="footer-col footer-col-1">
                        <a href="https://www.freecodecamp.org/news/what-is-docker-used-for-a-docker-container-tutorial-for-beginners/">What is Docker?</a>
                        <a href="https://www.freecodecamp.org/news/what-is-tcp-ip-layers-and-protocols-explained/">TCP/IP Model</a>
                        <a href="https://www.freecodecamp.org/news/rtf-file-what-is-the-rich-text-format/">RTF File</a>
                        <a href="https://www.freecodecamp.org/news/css-transition-examples/">CSS Transition</a>
                        <a href="https://www.freecodecamp.org/news/how-to-use-instagram-like-a-pro/">How to Use Instagram?</a>
                        <a href="https://www.freecodecamp.org/news/mbr-vs-gpt-whats-the-difference-between-an-mbr-partition-and-a-gpt-partition-solved/">MBR VS GPT</a>
                        <a href="https://www.freecodecamp.org/news/how-to-format-a-usb-drive-to-fat32-on-windows-10/">FAT32 Format</a>
                        <a href="https://www.freecodecamp.org/news/http-error-503-service-unavailable-explained-what-the-503-error-code-means/">Error 503 Code</a>
                        <a href="https://www.freecodecamp.org/news/how-to-find-and-edit-a-windows-hosts-file/">Windows Hosts File</a>
                        <a href="https://www.freecodecamp.org/news/mobi-to-pdf-how-to-convert-to-and-from-a-mobi-file/">Mobi to PDF</a>
                    </div>
                    <div class="footer-col footer-col-2">
                        <a href="https://www.freecodecamp.org/news/what-is-stem-the-meaning-of-an-acronym-youll-hear-a-lot-in-school/">What is STEM?</a>
                        <a href="https://www.freecodecamp.org/news/javascript-void-keyword-explained/">JavaScript Void 0</a>
                        <a href="https://www.freecodecamp.org/news/sql-delete-row-statement-examples/">SQL Delete Row</a>
                        <a href="https://www.freecodecamp.org/news/javascript-string-replace-example-with-regex/">JavaScript Replace</a>
                        <a href="https://www.freecodecamp.org/news/python-read-json-file-how-to-load-json-from-a-file-and-parse-dumps/">Python JSON Parser</a>
                        <a href="https://www.freecodecamp.org/news/cmd-delete-folder-how-to-remove-files-and-folders-in-windows/">cmd Delete Folder</a>
                        <a href="https://www.freecodecamp.org/news/what-is-nfc-near-field-communication-uses-chips-tags-and-readers-explained/">What is NFC?</a>
                        <a href="https://www.freecodecamp.org/news/what-is-the-correct-content-type-for-json-request-header-mime-type-explained/">Content Type JSON</a>
                        <a href="https://www.freecodecamp.org/news/heic-to-jpg-how-to-convert-images-on-a-mac/">Convert HEIC to JPG</a>
                        <a href="https://www.freecodecamp.org/news/generate-random-numbers-java/">Math Random Java</a>
                    </div>
                    <div class="footer-col footer-col-3">
                        <div class="footer-left">
                            <a href="https://www.freecodecamp.org/news/how-to-start-a-blog-with-wordpress/">WordPress for Beginners</a>
                            <a href="https://www.freecodecamp.org/news/qualitative-vs-quantitative-definition-research-methods-and-data/">Qualitative VS Quantitative</a>
                            <a href="https://www.freecodecamp.org/news/javascript-split-string-example/">JavaScript Split String</a>
                            <a href="https://www.freecodecamp.org/news/how-to-type-letters-with-accents-on-mac/">Accented Letters on Mac</a>
                            <a href="https://www.freecodecamp.org/news/how-to-find-a-windows-10-product-key/">Windows 10 Product Key</a>
                        </div>

                        <div class="footer-right">
                            <a href="https://www.freecodecamp.org/news/google-docs-landscape-tutorial-how-to-make-a-google-doc-landscape-orientation/">Google Docs Landscape</a>
                            <a href="https://www.freecodecamp.org/news/antimalware-service-executable-what-is-msmpeng-exe-and-why-is-it-running-in-windows-10/">Antimalware Executable</a>
                            <a href="https://www.freecodecamp.org/news/windows-10-start-menu-not-working-solved/">Windows 10 Start Menu</a>
                            <a href="https://www.freecodecamp.org/news/how-to-open-the-command-prompt-in-windows-10/">Windows 10 Command Line</a>
                            <a href="https://www.freecodecamp.org/news/google-account-recovery-change-gmail-password/">Google Account Recovery</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="col-header">Our Nonprofit</div>
            <div class="footer-divider"></div>
            <div class="our-nonprofit">
                <a href="https://www.freecodecamp.org/news/about/">About</a>
                <a href="https://www.linkedin.com/school/free-code-camp/people/" rel="noopener noreferrer" target="_blank">Alumni Network</a>
                <a href="https://github.com/freeCodeCamp/">Open Source</a>
                <a href="https://www.freecodecamp.org/shop/" rel="noopener noreferrer" target="_blank">Shop</a>
                <a href="https://www.freecodecamp.org/news/support/">Support</a>
                <a href="https://www.freecodecamp.org/news/sponsors/">Sponsors</a>
                <a href="https://www.freecodecamp.org/news/academic-honesty-policy/">Academic Honesty</a>
                <a href="https://www.freecodecamp.org/news/code-of-conduct/">Code of Conduct</a>
                <a href="https://www.freecodecamp.org/news/privacy-policy/">Privacy Policy</a>
                <a href="https://www.freecodecamp.org/news/terms-of-service/">Terms of Service</a>
                <a href="https://www.freecodecamp.org/news/copyright-policy/">Copyright Policy</a>
            </div>
        </div>
    </div>
</footer>
    </div>

    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>

    <script src="./Learn JavaScript Closures with Code Examples_files/jquery-3.2.1.min.js.download" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
        </script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/jquery.fitvids.js.download"></script>

    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-unescaped-markup.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-markup-templating.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-bash.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-c.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-clojure.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-cpp.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-csharp.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-css.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-docker.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-elixir.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-erlang.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-git.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-go.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-graphql.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-haskell.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-java.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-javascript.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-json.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-jsx.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-kotlin.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-lua.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-markup.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-php.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-python.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-r.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-ruby.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-rust.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-scala.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-sql.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-swift.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-typescript.min.js.download"></script>
    <script type="text/javascript" src="./Learn JavaScript Closures with Code Examples_files/prism-yaml.min.js.download"></script>

    <script>
    // Conditionally remove social-row based on the publication language setting
    const hideSocialRowList = ['zh-cn'];
    const socialRow = document.getElementsByClassName('social-row')[0];

    if (hideSocialRowList.includes(`en`)) socialRow.remove();
    else {
        const title = `Learn%20JavaScript%20Closures%20with%20Code%20Examples`.replace(/'/g, '%27');
        const twitter = ``;
        const url = window.location;
        const thanks = `Thank%20you%20${twitter}%20for%20writing%20this%20helpful%20article%2e%0A%0A` + `${title}%0A%0A${url}`;
        const button = document.getElementById('tweet-btn');
        button.addEventListener('click', () => {
            if (twitter) {
                window.open(`https://twitter.com/intent/tweet?text=${thanks}`, `share-twitter`, `width=550, height=235`);
                return false;
            }
            else {
                window.open(`https://twitter.com/intent/tweet?text=${title}%0A%0A${url}`, `share-twitter`, `width=550, height=235`);
                return false;
            }
        })
        console.log(twitter)
    }
</script>

<script>
    $(document).ready(function () {
        // Start fitVids
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // End fitVids
    });
</script>


    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->



</body></html>